<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="57x57" href="/isotype.png"/><link rel="apple-touch-icon" sizes="60x60" href="/isotype.png"/><link rel="apple-touch-icon" sizes="72x72" href="/isotype.png"/><link rel="apple-touch-icon" sizes="76x76" href="/isotype.png"/><link rel="apple-touch-icon" sizes="114x114" href="/isotype.png"/><link rel="apple-touch-icon" sizes="120x120" href="/isotype.png"/><link rel="apple-touch-icon" sizes="144x144" href="/isotype.png"/><link rel="apple-touch-icon" sizes="152x152" href="/isotype.png"/><link rel="apple-touch-icon" sizes="180x180" href="/isotype.png"/><link rel="icon" type="image/png" sizes="192x192" href="/isotype.png"/><link rel="icon" type="image/png" sizes="32x32" href="/isotype.png"/><link rel="icon" type="image/png" sizes="96x96" href="/isotype.png"/><link rel="icon" type="image/png" sizes="16x16" href="/isotype.png"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/isotype.png"/><meta name="theme-color" content="#ffffff"/><title>Comment on data flow in Ember apps</title><link rel="preload" href="/new-profile/_next/static/css/8e1df1737e67450786cc.css" as="style"/><link rel="stylesheet" href="/new-profile/_next/static/css/8e1df1737e67450786cc.css" data-n-g=""/><link rel="preload" href="/new-profile/_next/static/css/bc9bbcd6fea02b72560a.css" as="style"/><link rel="stylesheet" href="/new-profile/_next/static/css/bc9bbcd6fea02b72560a.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/new-profile/_next/static/chunks/main-5ab6ea82c9087f336e12.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/webpack-38f4ef47162466e52626.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/framework.7008427c9ed7ea1ea070.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/1ca0266d.bc7564fa166f0d34b14f.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/commons.c903b9c5c3d275f65bfc.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/74dccfed65656dfb6adb258ae839e136f67e0276.47b8922ced02d1ddaa2f.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/2412aec2c30a40454afb28aa7ad51596c664a3e6.1e80e1ab8448746fa0db.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/pages/_app-52d859afcfe46e563952.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/57c9d6e4b97e6bcf244aee8ce3648d5d9adaacb1.bfcec4d669b9affd02e0.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/798fd9b41a459e61ee4594ce38d25c96f259064c.8c8bea5984a65dd9a41b.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/pages/blog/comment-on-data-flow-in-ember-apps-687bfbfb14c605ade88b.js" as="script"/></head><body><div id="__next"><div class="flex flex-col min-h-screen font-sans text-base antialiased text-gray-800"><header class="px-6"><div class="pt-4 mx-auto max-w-7xl md:pt-6 xl:pt-8"><div class="flex justify-between pb-4 md:pb-0 md:border-b md:border-gray-200 md:justify-start"><a class="text-sm font-light tracking-wide uppercase md:text-base lg:text-xl" href="/"><span class="font-bold">Frank</span>Cary</a><button class="p-2 -m-2 text-gray-700 focus:outline-none md:hidden"><svg fill="currentColor" viewBox="0 0 20 20" class="block w-4 h-4"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></button><div class="items-center hidden ml-auto md:flex"><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/projects">Projects</a><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/podcast">Podcast</a><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/contact">Contact</a></div></div><div class="md:hidden"></div></div></header><main class="flex flex-col flex-1"><div class="px-6 pt-6 md:pt-12 lg:pt-16 md:leading-relaxed md:text-lg- lg:text-lg"><div class="max-w-measure mx-auto"><article><div class="mb-8 md:mb-10"><h1 class="mt-8 text-3xl font-semibold leading-tight md:text-4xl lg:text-4-5xl">Comment on data flow in Ember apps</h1></div><p class="mt-4 lg:mt-6">Here&#x27;s a comment I wrote in response to <a class="text-blue-500 underline" href="http://www.thesoftwaresimpleton.com/blog/2015/03/13/ember-reflux/">this article</a> on data flow and state management in Ember applications.</p><hr class="mt-4 border-gray-200 lg:mt-6"/><p class="mt-4 lg:mt-6">Thanks for writing this up! Interesting thoughts.</p><p class="mt-4 lg:mt-6">I personally haven&#x27;t been bit by Ember Data like others have. To me, Ember Data&#x27;s store is very similar to a flux store - an identity map that any piece of your system can access rather simply. I&#x27;ve started moving actions that mutate Ember Data state to my models. For instance, <code class="px-1 py-px text-sm bg-gray-100">user.createPost()</code> or <code class="px-1 py-px text-sm bg-gray-100">user.saveAll()</code> (to save a graph of objects). I find putting data-only related methods in the data layer provides the same benefit you describe above: pulling it &quot;out&quot; of the UI component hierarchy, making refactoring much easier and eliminating action-sending boilerplate. Ember Data&#x27;s identity map + Ember&#x27;s bindings feel like a flux store implementation with a really nice API.</p><p class="mt-4 lg:mt-6">Then, there&#x27;s non-Ember Data application state. Where should this live? I actually think it&#x27;s okay to have a few different options. I think the community needs to provide some better guidance around when to use which, but personally I think going completely all-in on lots of little flux stores for every bit of application state is overkill.</p><p class="mt-4 lg:mt-6">If I have a <code class="px-1 py-px text-sm bg-gray-100">&lt;panel&gt;</code> in some component, and it has an <code class="px-1 py-px text-sm bg-gray-100">isOpen</code> boolean, just store that state on the component, and use local <code class="px-1 py-px text-sm bg-gray-100">actions</code> to mutate it. Easy enough.</p><p class="mt-4 lg:mt-6">If I have a series of <code class="px-1 py-px text-sm bg-gray-100">&lt;panels&gt;</code>, and some other template needs a <code class="px-1 py-px text-sm bg-gray-100">&lt;button&gt;</code> to <code class="px-1 py-px text-sm bg-gray-100">expandAllPanels</code>, well now we&#x27;re in more complex territory. We have application state that&#x27;s somewhat complex (array of booleans representing which panels are open), and it has nothing to do with persistent state, so we can&#x27;t leverage Ember Data&#x27;s identity map. The typical rule with DDAU is to put this state at the lowest point in our component hierarchy that&#x27;s still above every component that needs it, and declare that component the &quot;owner&quot;. Then, the owner passes the data down to everyone else who needs it, and handles actions that mutate it. But, as you say, using our component UI hierarchy to pass around actions like this is brittle and painful. Many components end up being just middlemen for action handling, which makes refactoring difficult. Closure actions will help here, but they still add a lot of noise.</p><p class="mt-4 lg:mt-6">In these situations, I like to use an Ember.Service to hold the app state. This is essentially another way to create a little flux store in my application. I could make a <code class="px-1 py-px text-sm bg-gray-100">companyPanels</code> service (say if I was dealing with a list of companies), and all the routes/components could inject that service if they needed to know the current state, or mutate the state. So individual components that render a <code class="px-1 py-px text-sm bg-gray-100">&lt;company-panel&gt;</code> could have an action that does something like <code class="px-1 py-px text-sm bg-gray-100">this.get(&#x27;companyPanels&#x27;).open(&#x27;some-company&#x27;)</code>. The <code class="px-1 py-px text-sm bg-gray-100">&lt;button&gt;</code> that needs to expandAll could do <code class="px-1 py-px text-sm bg-gray-100">this.get(&#x27;companyPanels&#x27;).openAll()</code>. And each panel could get its <code class="px-1 py-px text-sm bg-gray-100">isOpen</code> status from the service as well. Now, you have all your state for this complicated piece of ui in a single place, and an easy way for components to get or mutate it. Again we have something that gives us most of the benefits of the flux architecture, with a nice API (since we&#x27;re just leveraging Ember&#x27;s DI system).</p><p class="mt-4 lg:mt-6">Finally, I think computed properties can be extremely useful, mostly on an individual component level. Component macros are essentially functional transforms, and if we eschew them completely we&#x27;ll end up rewriting a lot of that code for little gain. I think people can go crazy with CPs, but I find adding some filters and sorts to a component via the packaged Ember.computed CPs is a concise, declarative way to transform data.</p><p class="mt-4 lg:mt-6">Overall, I sympathize a lot with your thoughts, but don&#x27;t think we need to throw out the baby with the bathwater. I think we can incorporate a lot of principles from flux/react into our Ember apps via Ember Data&#x27;s store and Services, and just tie simpler application state to component lifecycles. A unified message around this would help address a lot of the pain people feel in more complex Ember applications.</p></article><p class="pt-8 text-sm font-medium text-right text-gray-500 md:mt-1">September 19, 2015</p><hr class="mt-10"/><div class="mt-10"><div><a class="block w-16 h-16 mx-auto overflow-hidden rounded-full" href="/"><div style="max-width:100%;width:985px"><div style="position:relative;padding-bottom:100%"><img data-src="/_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=1024&amp;q=75" data-srcset="/_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=320&amp;q=75 320w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=420&amp;q=75 420w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=768&amp;q=75 768w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=1024&amp;q=75 1024w" class="__lazy" style="visibility:hidden;height:100%;left:0;position:absolute;top:0;width:100%"/></div></div></a></div><div class="mt-2 leading-none text-center"><p class="pt-2 text-xs font-semibold tracking-wider text-gray-600 uppercase">Written by</p><p class="pt-2 text-xl font-semibold"><a href="/">Sam Selikoff</a></p></div></div><div class="pb-24 mt-8 text-center"><a class="font-medium text-blue-500" href="/blog">← View all posts</a></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/comment-on-data-flow-in-ember-apps","query":{},"buildId":"M71mXDw6q-R3fUMIpH_aM","assetPrefix":"/new-profile","nextExport":true,"autoExport":true,"isFallback":false,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"apple-touch-icon","sizes":"57x57","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"60x60","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"72x72","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"76x76","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"114x114","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"120x120","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"144x144","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"152x152","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"180x180","href":"/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"192x192","href":"/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"32x32","href":"/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"96x96","href":"/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"16x16","href":"/isotype.png"}],["link",{"rel":"manifest","href":"/manifest.json"}],["meta",{"name":"msapplication-TileColor","content":"#ffffff"}],["meta",{"name":"msapplication-TileImage","content":"/isotype.png"}],["meta",{"name":"theme-color","content":"#ffffff"}],["title",{"children":"Comment on data flow in Ember apps"}]]}</script><script nomodule="" src="/new-profile/_next/static/chunks/polyfills-f9ac226678fc858257de.js"></script><script src="/new-profile/_next/static/chunks/main-5ab6ea82c9087f336e12.js" async=""></script><script src="/new-profile/_next/static/chunks/webpack-38f4ef47162466e52626.js" async=""></script><script src="/new-profile/_next/static/chunks/framework.7008427c9ed7ea1ea070.js" async=""></script><script src="/new-profile/_next/static/chunks/1ca0266d.bc7564fa166f0d34b14f.js" async=""></script><script src="/new-profile/_next/static/chunks/commons.c903b9c5c3d275f65bfc.js" async=""></script><script src="/new-profile/_next/static/chunks/74dccfed65656dfb6adb258ae839e136f67e0276.47b8922ced02d1ddaa2f.js" async=""></script><script src="/new-profile/_next/static/chunks/2412aec2c30a40454afb28aa7ad51596c664a3e6.1e80e1ab8448746fa0db.js" async=""></script><script src="/new-profile/_next/static/chunks/pages/_app-52d859afcfe46e563952.js" async=""></script><script src="/new-profile/_next/static/chunks/57c9d6e4b97e6bcf244aee8ce3648d5d9adaacb1.bfcec4d669b9affd02e0.js" async=""></script><script src="/new-profile/_next/static/chunks/798fd9b41a459e61ee4594ce38d25c96f259064c.8c8bea5984a65dd9a41b.js" async=""></script><script src="/new-profile/_next/static/chunks/pages/blog/comment-on-data-flow-in-ember-apps-687bfbfb14c605ade88b.js" async=""></script><script src="/new-profile/_next/static/M71mXDw6q-R3fUMIpH_aM/_buildManifest.js" async=""></script><script src="/new-profile/_next/static/M71mXDw6q-R3fUMIpH_aM/_ssgManifest.js" async=""></script></body></html>