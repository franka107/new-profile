<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="57x57" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="60x60" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="72x72" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="76x76" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="114x114" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="120x120" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="144x144" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="152x152" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="icon" type="image/png" sizes="192x192" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="icon" type="image/png" sizes="96x96" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><meta name="theme-color" content="#ffffff"/><title>Ember and D3: Getting new data within a route</title><link rel="preload" href="/new-profile/_next/static/css/8e1df1737e67450786cc.css" as="style"/><link rel="stylesheet" href="/new-profile/_next/static/css/8e1df1737e67450786cc.css" data-n-g=""/><link rel="preload" href="/new-profile/_next/static/css/bc9bbcd6fea02b72560a.css" as="style"/><link rel="stylesheet" href="/new-profile/_next/static/css/bc9bbcd6fea02b72560a.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/new-profile/_next/static/chunks/main-5ab6ea82c9087f336e12.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/webpack-38f4ef47162466e52626.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/framework.7008427c9ed7ea1ea070.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/1ca0266d.bc7564fa166f0d34b14f.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/commons.c903b9c5c3d275f65bfc.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/74dccfed65656dfb6adb258ae839e136f67e0276.82c58655d5f4f7af0bf3.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/2412aec2c30a40454afb28aa7ad51596c664a3e6.1e80e1ab8448746fa0db.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/pages/_app-3f00c45ba3d6396804fc.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/57c9d6e4b97e6bcf244aee8ce3648d5d9adaacb1.bfcec4d669b9affd02e0.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/798fd9b41a459e61ee4594ce38d25c96f259064c.8c8bea5984a65dd9a41b.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/pages/blog/ember-d3-getting-new-data-within-a-route-1dab330da3d487dfdba1.js" as="script"/></head><body><div id="__next"><div class="flex flex-col min-h-screen font-sans text-base antialiased text-gray-800"><header class="px-6"><div class="pt-4 mx-auto max-w-7xl md:pt-6 xl:pt-8"><div class="flex justify-between pb-4 md:pb-0 md:border-b md:border-gray-200 md:justify-start"><a class="text-sm font-light tracking-wide uppercase md:text-base lg:text-xl" href="/new-profile"><span class="font-bold">Frank</span>Cary</a><button class="p-2 -m-2 text-gray-700 focus:outline-none md:hidden"><svg fill="currentColor" viewBox="0 0 20 20" class="block w-4 h-4"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></button><div class="items-center hidden ml-auto md:flex"><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/new-profile/projects">Projects</a><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/new-profile/contact">Contact</a></div></div><div class="md:hidden"></div></div></header><main class="flex flex-col flex-1"><div class="px-6 pt-6 md:pt-12 lg:pt-16 md:leading-relaxed md:text-lg- lg:text-lg"><div class="max-w-measure mx-auto"><article><div class="mb-8 md:mb-10"><h1 class="mt-8 text-3xl font-semibold leading-tight md:text-4xl lg:text-4-5xl">Ember and D3: Getting new data within a route</h1></div><p class="mt-4 lg:mt-6">When doing datavis, you&#x27;ll often want to display new data without changing the route of your appplication. For example, you may want to supplement a time series chart with a baseline render. These types of UI interactions are not meaningful enough to change the URL<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>, but they still may require an additional call to the server.</p><p class="mt-4 lg:mt-6">Ember places a lot of emphasis on routing, so examples of fetching data from the server when switching routes are prevalent. But here, I want to look at fetching data without changing the route. Let&#x27;s say part of our <code class="px-1 py-px text-sm bg-gray-100">IndexRoute</code> has a datepicker, and each time a user selects a month, we want to add some data to an existing chart.</p><p class="mt-4 lg:mt-6">The first thing to remember is that in Ember, controllers can be thought of as data containers. Models act as proxies to your actual data on the server, but when it comes to actually displaying and manipulating data in your Ember app, controllers take center stage. So, to get some new data, the first step is to make a new controller. We&#x27;ll use an <code class="px-1 py-px text-sm bg-gray-100">ArrayController</code> to hold all the months the user has selected:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#F16372">App</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">MonthsController</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#F16372">Ember</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">ArrayController</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">extend</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">{</span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">This will be the container for our models.</p><p class="mt-4 lg:mt-6">Now, we want to add some models to our controller. Again, because many Ember apps will only need new data upon entering a new route, you&#x27;ll come across numerous guides on how to accomplish this that will point you to a controller&#x27;s <code class="px-1 py-px text-sm bg-gray-100">init</code> function, or to the <code class="px-1 py-px text-sm bg-gray-100">model</code> or <code class="px-1 py-px text-sm bg-gray-100">setupController</code> hooks within a route. But that&#x27;s not what we&#x27;re interested in here. These components are part of Ember&#x27;s sophisticated routing system, and while they work nicely when changing routes, we&#x27;ll have to find another way.</p><p class="mt-4 lg:mt-6">First, let&#x27;s model our data:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#F16372">App</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">Month</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#DB975C">DS</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">Model</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">extend</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  min</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#DB975C">DS</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;number&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span>  max</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#DB975C">DS</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;number&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span>  </span><span class="token" style="color:#5A6371;font-style:italic">// (other data)</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">How can we get new <code class="px-1 py-px text-sm bg-gray-100">Month</code> models into our controller? Let&#x27;s start with the UI. Usually when dealing with datepickers, you&#x27;ll need to write some Javascript. This means we&#x27;ll probably need more than just a template to handle our user interactions. Let&#x27;s create a view for our datepicker</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#F16372">App</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">DatepickerView</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#F16372">Ember</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">View</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">extend</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token function-variable" style="color:#40B1F5">init</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">$</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">datepicker</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">and add it to our <code class="px-1 py-px text-sm bg-gray-100">IndexRoute</code></p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-html subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-html" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>// index.html
</span></span><span>
</span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">script</span><span class="token" style="color:#F16372"> </span><span class="token token" style="color:#8CC570">type</span><span class="token token token attr-equals" style="color:#A9B2C0">=</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token token" style="color:#ECBE70">text/x-handlebars</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token" style="color:#F16372"> </span><span class="token token" style="color:#8CC570">data-template-name</span><span class="token token token attr-equals" style="color:#A9B2C0">=</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token token" style="color:#ECBE70">index</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">    </span><span class="token script token language-javascript token" style="color:#19B9C4">&lt;</span><span class="token script token language-javascript">h1</span><span class="token script token language-javascript token" style="color:#19B9C4">&gt;</span><span class="token script token language-javascript token" style="color:#F16372">Welcome</span><span class="token script token language-javascript"> to may app</span><span class="token script token language-javascript token" style="color:#19B9C4">!</span><span class="token script token language-javascript token" style="color:#19B9C4">&lt;</span><span class="token script token language-javascript token" style="color:#19B9C4">/</span><span class="token script token language-javascript">h1</span><span class="token script token language-javascript token" style="color:#19B9C4">&gt;</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">    </span><span class="token script token language-javascript token spread" style="color:#19B9C4">...</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">    </span><span class="token script token language-javascript token" style="color:#19B9C4">&lt;</span><span class="token script token language-javascript">aside</span><span class="token script token language-javascript token" style="color:#19B9C4">&gt;</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">       </span><span class="token script token language-javascript token" style="color:#A9B2C0">{</span><span class="token script token language-javascript token" style="color:#A9B2C0">{</span><span class="token script token language-javascript">view </span><span class="token script token language-javascript token" style="color:#F16372">App</span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token token" style="color:#F16372">DatepickerView</span><span class="token script token language-javascript token" style="color:#A9B2C0">}</span><span class="token script token language-javascript token" style="color:#A9B2C0">}</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">    </span><span class="token script token language-javascript token" style="color:#19B9C4">&lt;</span><span class="token script token language-javascript token" style="color:#19B9C4">/</span><span class="token script token language-javascript">aside</span><span class="token script token language-javascript token" style="color:#19B9C4">&gt;</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">  </span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">script</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span>  ...
</span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Now, when a user clicks a month on our datepicker, we want to fetch some new data. Ultimately, we&#x27;ll use the data to rerender our D3 chart - but in this post, I just want to focus on getting the data. If we were transitioning to a new route, we&#x27;d use the standard <code class="px-1 py-px text-sm bg-gray-100">{{linkTo}}</code> helper, and specify our data in the <code class="px-1 py-px text-sm bg-gray-100">model</code> hook of our route. Here, we&#x27;ll have to write some custom methods.</p><p class="mt-4 lg:mt-6">First, we&#x27;ll want to handle the click event in our view. The details will vary depending on what datepicker you&#x27;re using (or if you&#x27;re writing your own), but you&#x27;ll probably be able to access the selected date from the datepicker&#x27;s api. But what are we going to do with the selected date? The view shouldn&#x27;t be responsible for calling the server directly to get the new data - we already have a controller that should be managing that. So that&#x27;s what we&#x27;ll do - trigger an event that tells the controller to get some new data. First, tell the view to trigger the event:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#F16372">App</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">DatepickerView</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#F16372">Ember</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">View</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">extend</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token function-variable" style="color:#40B1F5">click</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">e</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">var</span><span> id </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">$</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">datepicker</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">getDate</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">get</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;controller.controllers.months&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">send</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;addMonth&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> id</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">In this example, the <code class="px-1 py-px text-sm bg-gray-100">DatepickerView</code> is in the <code class="px-1 py-px text-sm bg-gray-100">IndexRoute</code>, so its context is the <code class="px-1 py-px text-sm bg-gray-100">IndexController</code>. Since we need to send the <code class="px-1 py-px text-sm bg-gray-100">addMonth</code> event to the <code class="px-1 py-px text-sm bg-gray-100">MonthsController</code>, we need to teach our <code class="px-1 py-px text-sm bg-gray-100">IndexController</code> how to find the <code class="px-1 py-px text-sm bg-gray-100">MonthsController</code>. We do this using the <code class="px-1 py-px text-sm bg-gray-100">needs</code> property:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#F16372">App</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">IndexController</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#F16372">Ember</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">Controller</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">extend</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  needs</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#A9B2C0">[</span><span class="token" style="color:#8CC570">&quot;months&quot;</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Now, every time a user clicks a month, the view sends an <code class="px-1 py-px text-sm bg-gray-100">addMonth</code> event to the <code class="px-1 py-px text-sm bg-gray-100">MonthsController</code>. Let&#x27;s write a method to handle this event. The goal is to fetch the new model from the server, and once it fetches, add it to the <code class="px-1 py-px text-sm bg-gray-100">MonthsController</code>. Any view that reads data from the <code class="px-1 py-px text-sm bg-gray-100">MonthsController</code> (for example, our hypothetical D3 chart) will then automatically update once the data comes in.</p><p class="mt-4 lg:mt-6">Here&#x27;s the method:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#F16372">App</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">MonthsController</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#F16372">Ember</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">ArrayController</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">extend</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  actions</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token function-variable" style="color:#40B1F5">addMonth</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">id</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>      </span><span class="token" style="color:#D373E3">var</span><span> _this </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>      </span><span class="token" style="color:#F16372">App</span><span class="token" style="color:#A9B2C0">.</span><span class="token token" style="color:#F16372">Month</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">find</span><span class="token" style="color:#A9B2C0">(</span><span>id</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">then</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">month</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>        _this</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">pushObject</span><span class="token" style="color:#A9B2C0">(</span><span>month</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>      </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>    </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Pretty simple, right? We add the month to the controller once its returned. And that&#x27;s how you can get data to your controllers without changing routes.</p><p class="mt-4 lg:mt-6"><em>This is Part 2 in a series of posts on building a basic interactive dashboard using <a class="text-blue-500 underline" href="http://www.d3js.org">D3.js</a> and <a class="text-blue-500 underline" href="http://www.emberjs.com">Ember.js</a>.</em></p><div class="footnotes"><hr class="mt-4 border-gray-200 lg:mt-6"/><ol class="pl-6 mt-4 list-decimal lg:mt-6"><li class="mt-2" id="fn-1">In other words, it may not be appropriate to structure the output resulting from the user&#x27;s interaction as a new resource.<a class="footnote-backref" href="#fnref-1">↩</a></li></ol></div></article><p class="pt-8 text-sm font-medium text-right text-gray-500 md:mt-1">July 28, 2013</p><hr class="mt-10"/><div class="mt-10"><div><a class="block w-16 h-16 mx-auto overflow-hidden rounded-full" href="/new-profile"><div style="max-width:100%;width:985px"><div style="position:relative;padding-bottom:100%"><img data-src="/_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=1024&amp;q=75" data-srcset="/_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=320&amp;q=75 320w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=420&amp;q=75 420w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=768&amp;q=75 768w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=1024&amp;q=75 1024w" class="__lazy" style="visibility:hidden;height:100%;left:0;position:absolute;top:0;width:100%"/></div></div></a></div><div class="mt-2 leading-none text-center"><p class="pt-2 text-xs font-semibold tracking-wider text-gray-600 uppercase">Written by</p><p class="pt-2 text-xl font-semibold"><a href="/new-profile">Sam Selikoff</a></p></div></div><div class="pb-24 mt-8 text-center"><a class="font-medium text-blue-500" href="/new-profile/blog">← View all posts</a></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/ember-d3-getting-new-data-within-a-route","query":{},"buildId":"ys9M8kH2ifN7RecEwK3a6","assetPrefix":"/new-profile","nextExport":true,"autoExport":true,"isFallback":false,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"apple-touch-icon","sizes":"57x57","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"60x60","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"72x72","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"76x76","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"114x114","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"120x120","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"144x144","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"152x152","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"180x180","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"192x192","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"32x32","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"96x96","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"16x16","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"manifest","href":"/manifest.json"}],["meta",{"name":"msapplication-TileColor","content":"#ffffff"}],["meta",{"name":"msapplication-TileImage","content":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["meta",{"name":"theme-color","content":"#ffffff"}],["title",{"children":"Ember and D3: Getting new data within a route"}]]}</script><script nomodule="" src="/new-profile/_next/static/chunks/polyfills-f9ac226678fc858257de.js"></script><script src="/new-profile/_next/static/chunks/main-5ab6ea82c9087f336e12.js" async=""></script><script src="/new-profile/_next/static/chunks/webpack-38f4ef47162466e52626.js" async=""></script><script src="/new-profile/_next/static/chunks/framework.7008427c9ed7ea1ea070.js" async=""></script><script src="/new-profile/_next/static/chunks/1ca0266d.bc7564fa166f0d34b14f.js" async=""></script><script src="/new-profile/_next/static/chunks/commons.c903b9c5c3d275f65bfc.js" async=""></script><script src="/new-profile/_next/static/chunks/74dccfed65656dfb6adb258ae839e136f67e0276.82c58655d5f4f7af0bf3.js" async=""></script><script src="/new-profile/_next/static/chunks/2412aec2c30a40454afb28aa7ad51596c664a3e6.1e80e1ab8448746fa0db.js" async=""></script><script src="/new-profile/_next/static/chunks/pages/_app-3f00c45ba3d6396804fc.js" async=""></script><script src="/new-profile/_next/static/chunks/57c9d6e4b97e6bcf244aee8ce3648d5d9adaacb1.bfcec4d669b9affd02e0.js" async=""></script><script src="/new-profile/_next/static/chunks/798fd9b41a459e61ee4594ce38d25c96f259064c.8c8bea5984a65dd9a41b.js" async=""></script><script src="/new-profile/_next/static/chunks/pages/blog/ember-d3-getting-new-data-within-a-route-1dab330da3d487dfdba1.js" async=""></script><script src="/new-profile/_next/static/ys9M8kH2ifN7RecEwK3a6/_buildManifest.js" async=""></script><script src="/new-profile/_next/static/ys9M8kH2ifN7RecEwK3a6/_ssgManifest.js" async=""></script></body></html>