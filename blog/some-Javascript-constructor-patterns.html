<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="57x57" href="/isotype.png"/><link rel="apple-touch-icon" sizes="60x60" href="/isotype.png"/><link rel="apple-touch-icon" sizes="72x72" href="/isotype.png"/><link rel="apple-touch-icon" sizes="76x76" href="/isotype.png"/><link rel="apple-touch-icon" sizes="114x114" href="/isotype.png"/><link rel="apple-touch-icon" sizes="120x120" href="/isotype.png"/><link rel="apple-touch-icon" sizes="144x144" href="/isotype.png"/><link rel="apple-touch-icon" sizes="152x152" href="/isotype.png"/><link rel="apple-touch-icon" sizes="180x180" href="/isotype.png"/><link rel="icon" type="image/png" sizes="192x192" href="/isotype.png"/><link rel="icon" type="image/png" sizes="32x32" href="/isotype.png"/><link rel="icon" type="image/png" sizes="96x96" href="/isotype.png"/><link rel="icon" type="image/png" sizes="16x16" href="/isotype.png"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/isotype.png"/><meta name="theme-color" content="#ffffff"/><title>Some Javascript constructor patterns, and when to use them</title><link rel="preload" href="/new-profile/_next/static/css/8e1df1737e67450786cc.css" as="style"/><link rel="stylesheet" href="/new-profile/_next/static/css/8e1df1737e67450786cc.css" data-n-g=""/><link rel="preload" href="/new-profile/_next/static/css/bc9bbcd6fea02b72560a.css" as="style"/><link rel="stylesheet" href="/new-profile/_next/static/css/bc9bbcd6fea02b72560a.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/new-profile/_next/static/chunks/main-5ab6ea82c9087f336e12.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/webpack-38f4ef47162466e52626.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/framework.7008427c9ed7ea1ea070.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/1ca0266d.bc7564fa166f0d34b14f.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/commons.c903b9c5c3d275f65bfc.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/74dccfed65656dfb6adb258ae839e136f67e0276.47b8922ced02d1ddaa2f.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/2412aec2c30a40454afb28aa7ad51596c664a3e6.1e80e1ab8448746fa0db.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/pages/_app-52d859afcfe46e563952.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/57c9d6e4b97e6bcf244aee8ce3648d5d9adaacb1.bfcec4d669b9affd02e0.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/798fd9b41a459e61ee4594ce38d25c96f259064c.8c8bea5984a65dd9a41b.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/pages/blog/some-Javascript-constructor-patterns-a11532ffd2075662f1f1.js" as="script"/></head><body><div id="__next"><div class="flex flex-col min-h-screen font-sans text-base antialiased text-gray-800"><header class="px-6"><div class="pt-4 mx-auto max-w-7xl md:pt-6 xl:pt-8"><div class="flex justify-between pb-4 md:pb-0 md:border-b md:border-gray-200 md:justify-start"><a class="text-sm font-light tracking-wide uppercase md:text-base lg:text-xl" href="/"><span class="font-bold">Frank</span>Cary</a><button class="p-2 -m-2 text-gray-700 focus:outline-none md:hidden"><svg fill="currentColor" viewBox="0 0 20 20" class="block w-4 h-4"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></button><div class="items-center hidden ml-auto md:flex"><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/projects">Projects</a><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/podcast">Podcast</a><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/contact">Contact</a></div></div><div class="md:hidden"></div></div></header><main class="flex flex-col flex-1"><div class="px-6 pt-6 md:pt-12 lg:pt-16 md:leading-relaxed md:text-lg- lg:text-lg"><div class="max-w-measure mx-auto"><article><div class="mb-8 md:mb-10"><h1 class="mt-8 text-3xl font-semibold leading-tight md:text-4xl lg:text-4-5xl">Some Javascript constructor patterns, and when to use them</h1></div><p class="mt-4 lg:mt-6">As I&#x27;ve been writing more and more JavaScript, I&#x27;ve learned something about the community: Javascripters like to do things differently. Ask two developers, or look at two different popular open-source projects, and you&#x27;ll probably come across two different solutions for doing the same thing, whether it&#x27;s as trivial as writing getter/setter methods or as complicated as loading modules. Sometimes I&#x27;m able to find a consensus around these solutions, but often I get lost among the alternatives, and find it difficult to determine which is most appropriate for my specific use case.</p><p class="mt-4 lg:mt-6">One example is writing constructors. I&#x27;ve come across several ways to do it - but which way is right? Why do some libraries choose one method, and some another? In this post, I&#x27;d like to explore some of the techniques I&#x27;ve encountered for writing constructor functions, their pros and cons, and when to use them.</p><h2 id="generic-advice-using-the-new-keyword-(mozilla)" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Generic advice - using the new keyword (Mozilla)</h2><p class="mt-4 lg:mt-6">If I had to describe the &#x27;standard&#x27; constructor pattern I&#x27;ve seen, it&#x27;s probably this:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#5A6371;font-style:italic">// The constructor - like a class, but actually, not really</span><span>
</span></span><span><span></span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token token" style="color:#F16372">Person</span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">firstName</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> lastName</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> firstName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">lastName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> lastName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token method-variable function-variable method" style="color:#40B1F5">fullName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">return</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#8CC570">&quot; &quot;</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">lastName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#5A6371;font-style:italic">// Use it like this:</span><span>
</span></span><span><span></span><span class="token" style="color:#D373E3">var</span><span> sam </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">new</span><span> </span><span class="token" style="color:#ECBE70">Person</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;Sam&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#8CC570">&quot;Selikoff&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>sam</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">// &quot;Sam&quot;</span><span>
</span></span><span><span>sam</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">fullName</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">// &quot;Sam Selikoff&quot;</span><span>
</span></span><span>
</span><span><span>sam</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#8CC570">&quot;Samuel&quot;</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>sam</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">fullName</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">// Samuel Selikoff</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">This looks a lot like something you&#x27;d see in other languages - but don&#x27;t get too comfortable. If you instantiate two objects this way, they won&#x27;t necessarily always have the same properties and methods. This is because Javascript lets you mutate objects at run-time:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#5A6371;font-style:italic">// Add a gender property to this instance only</span><span>
</span></span><span><span>sam</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">gender</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#8CC570">&quot;male&quot;</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">You are also able to change existing methods and properties on your objects, and this may lead to behavior you don&#x27;t expect. For example, if you changed the <code class="px-1 py-px text-sm bg-gray-100">fullName</code> method on a single object, those changes wouldn&#x27;t be shared across other objects. This is because the <code class="px-1 py-px text-sm bg-gray-100">fullName</code> method is an anonymous function that&#x27;s attached directly to an instance variable. Each object will get its own copy of the function.</p><p class="mt-4 lg:mt-6">If you wanted the function to be shared across all <code class="px-1 py-px text-sm bg-gray-100">Person</code> objects, you could do it like this:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token token" style="color:#F16372">Person</span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">firstName</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> lastName</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> firstName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">lastName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> lastName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#ECBE70">Person</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">prototype</span><span class="token" style="color:#A9B2C0">.</span><span class="token method-variable function-variable method" style="color:#40B1F5">fullName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">return</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#8CC570">&quot; &quot;</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">lastName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">This constructor shares the <code class="px-1 py-px text-sm bg-gray-100">fullName</code> method across all instances. But how does it work?</p><h2 id="some-javascript-eccentricities" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Some Javascript eccentricities</h2><p class="mt-4 lg:mt-6">Whenever we create objects using the <code class="px-1 py-px text-sm bg-gray-100">new</code> keyword (as we&#x27;ve been doing), those objects get a special reference to the <code class="px-1 py-px text-sm bg-gray-100">Person.prototype</code> dictionary. (In Javascript, dictionaries are synonymous with objects, but I&#x27;m using the term here to describe objects that are used mainly as key-value references). Prototypes in Javascript give objects a chain of dictionaries used to look up methods. This means that if we call a method on an object, but that method isn&#x27;t defined directly on the object, Javscript will look for the method in the next level of the object&#x27;s <em>prototype chain</em>. If it finds it, it will invoke the method; if not, it will keep looking up the chain.</p><p class="mt-4 lg:mt-6">In our first example, we didn&#x27;t define a prototype on the <code class="px-1 py-px text-sm bg-gray-100">Person</code> constructor, so all instances of <code class="px-1 py-px text-sm bg-gray-100">Person</code> had prototype chains that were only one level deep, so to speak; that is, they only contained the default <code class="px-1 py-px text-sm bg-gray-100">Object.prototype</code> dictionary. This dictionary contains methods that all objects tend to have in other languages - <code class="px-1 py-px text-sm bg-gray-100">toString</code>, for instance.</p><p class="mt-4 lg:mt-6">In our second example, we explicitly created a dictionary on the <code class="px-1 py-px text-sm bg-gray-100">prototype</code> property of the constructor. The <code class="px-1 py-px text-sm bg-gray-100">new</code> keyword is aware of this property: it is designed to check if there&#x27;s a dictionary at <code class="px-1 py-px text-sm bg-gray-100">.prototype</code>, and if there is, it adds it to the prototype chain of the object it&#x27;s currently instantiating. This means that when we call <code class="px-1 py-px text-sm bg-gray-100">sam.fullName()</code>, Javascript first looks (unsuccessfully) for the method directly on the <code class="px-1 py-px text-sm bg-gray-100">sam</code> instance, and then moves on to the next level of <code class="px-1 py-px text-sm bg-gray-100">sam</code>&#x27;s prototype chain, which is the dictionary we created. Because that dictionary <em>does</em> have the <code class="px-1 py-px text-sm bg-gray-100">fullName</code> method, that method gets invoked. And because all objects that get instantiated from the <code class="px-1 py-px text-sm bg-gray-100">Person</code> constructor have a reference to the same prototype dictionary, they all refer to the same method. So this is how we can share methods across objects.</p><p class="mt-4 lg:mt-6">Before moving on to the next pattern, we should cover our use of the <code class="px-1 py-px text-sm bg-gray-100">this</code> keyword. I&#x27;m sure you&#x27;ve come across many JavaScript posts outlining the dangers of being ignorant of <code class="px-1 py-px text-sm bg-gray-100">this</code>. We use it in the above construct - so what do we need to be careful of?</p><p class="mt-4 lg:mt-6">First, a brief overview. <code class="px-1 py-px text-sm bg-gray-100">this</code> is a keyword that&#x27;s available in every Javascript function. It&#x27;s really just a pointer. But what does it point to? <strong>The <code class="px-1 py-px text-sm bg-gray-100">this</code> keyword points to the object that&#x27;s invoking the current function.</strong></p><p class="mt-4 lg:mt-6">So, the <code class="px-1 py-px text-sm bg-gray-100">this</code> keyword is really just a pointer to an object. But the <code class="px-1 py-px text-sm bg-gray-100">new</code> keyword does something nice for us: it tells <code class="px-1 py-px text-sm bg-gray-100">this</code> to point to the object that&#x27;s being instantiated. In this example from above,</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> sam </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">new</span><span> </span><span class="token" style="color:#ECBE70">Person</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;Sam&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#8CC570">&quot;Selikoff&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6"><code class="px-1 py-px text-sm bg-gray-100">this</code> pointed to <code class="px-1 py-px text-sm bg-gray-100">sam</code> whenever it was used inside the <code class="px-1 py-px text-sm bg-gray-100">Person</code> constructor function. If we hadn&#x27;t used <code class="px-1 py-px text-sm bg-gray-100">new</code>, though, <code class="px-1 py-px text-sm bg-gray-100">this</code> would have referred to the global object, since that was the object executing the constructor function. For example:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> george </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token token" style="color:#F16372">Person</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;George&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#8CC570">&quot;Foreman&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">// forgot &#x27;new&#x27;</span><span>
</span></span><span><span>george</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">// undefined</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Poor <code class="px-1 py-px text-sm bg-gray-100">george</code> is undefined! This is because when <code class="px-1 py-px text-sm bg-gray-100">Person</code> was invoked, <code class="px-1 py-px text-sm bg-gray-100">this</code> referred to the global object. That means these two lines within our constructor function</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> firstName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">lastName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> lastName</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">really just created two new global variables, <code class="px-1 py-px text-sm bg-gray-100">firstName</code> and <code class="px-1 py-px text-sm bg-gray-100">lastName</code>. When <code class="px-1 py-px text-sm bg-gray-100">Person</code> finished executing, it returned <code class="px-1 py-px text-sm bg-gray-100">undefined</code> (which happened by default, since it didn&#x27;t return anything). So <code class="px-1 py-px text-sm bg-gray-100">george</code> is undefined, and you&#x27;ve got two new globals - most certainly not what you intended!</p><p class="mt-4 lg:mt-6">Therefore, it&#x27;s important to remember to use the <code class="px-1 py-px text-sm bg-gray-100">new</code> keyword when using this pattern. Typically, constructors are capitalized (and instances lower-cased) to remind developers of this rule.</p><h2 id="closures-with-getter-setters-(d3.js-jquery)" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Closures with getter-setters (D3.js, jQuery)</h2><p class="mt-4 lg:mt-6">We just saw that when using the above pattern, you need to manage the context of <code class="px-1 py-px text-sm bg-gray-100">this</code> by using the <code class="px-1 py-px text-sm bg-gray-100">new</code> keyword. If this troubles you, there is another technique which avoids <code class="px-1 py-px text-sm bg-gray-100">this</code> altogether.</p><p class="mt-4 lg:mt-6">Here&#x27;s an example of how it&#x27;s used:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token token" style="color:#F16372">Person</span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">firstName</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> lastName</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">var</span><span> _firstName </span><span class="token" style="color:#19B9C4">=</span><span> firstName</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span>    _lastName </span><span class="token" style="color:#19B9C4">=</span><span> lastName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color:#D373E3">var</span><span> my </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>  my</span><span class="token" style="color:#A9B2C0">.</span><span class="token method-variable function-variable method" style="color:#40B1F5">fullName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">return</span><span> _firstName </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#8CC570">&quot; &quot;</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> _lastName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color:#5A6371;font-style:italic">// Getter/setters</span><span>
</span></span><span><span>  my</span><span class="token" style="color:#A9B2C0">.</span><span class="token method-variable function-variable method" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">value</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">if</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#19B9C4">!</span><span>arguments</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">length</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#D373E3">return</span><span> _firstName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>    _firstName </span><span class="token" style="color:#19B9C4">=</span><span> value</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color:#D373E3">return</span><span> my</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>  my</span><span class="token" style="color:#A9B2C0">.</span><span class="token method-variable function-variable method" style="color:#40B1F5">lastName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">value</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">if</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#19B9C4">!</span><span>arguments</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">length</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#D373E3">return</span><span> _lastName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>    _lastName </span><span class="token" style="color:#19B9C4">=</span><span> value</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color:#D373E3">return</span><span> my</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color:#D373E3">return</span><span> my</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#5A6371;font-style:italic">// Use it like this:</span><span>
</span></span><span><span></span><span class="token" style="color:#D373E3">var</span><span> mark </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token token" style="color:#F16372">Person</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;Mark&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#8CC570">&quot;Twain&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">// note: no `new` keyword!</span><span>
</span></span><span>
</span><span><span>mark</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">firstName</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;Samuel&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>mark</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">lastName</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;Clemens&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>mark</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">fullName</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">// Samuel Clemens</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">I was confused about this pattern when I first encountered it; the first pattern seems much more intuitive and familiar. But notice that since we never use <code class="px-1 py-px text-sm bg-gray-100">this</code>, we simply don&#x27;t have to worry about managing its context. No matter where we call <code class="px-1 py-px text-sm bg-gray-100">mark.fullName()</code>, or <code class="px-1 py-px text-sm bg-gray-100">mark.firstName(&#x27;Mark&#x27;)</code>, the instance variables we&#x27;re manipulating (<code class="px-1 py-px text-sm bg-gray-100">_firstName</code> and <code class="px-1 py-px text-sm bg-gray-100">_lastName</code>) will be the correct ones.</p><p class="mt-4 lg:mt-6">It turns out that the biggest benefit of this technique has nothing to do with <code class="px-1 py-px text-sm bg-gray-100">this</code>, though. Rather, it&#x27;s the ability to give your objects private properties and methods. In the example above, as you may have guessed, <code class="px-1 py-px text-sm bg-gray-100">_firstName</code> and <code class="px-1 py-px text-sm bg-gray-100">_lastName</code> are not publically accessible:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>mark</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">_firstName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#5A6371;font-style:italic">// undefined</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">How does this work?</p><p class="mt-4 lg:mt-6">Typically, when a function finishes executing, the variables declared within that function fall out of scope and get destroyed. But there&#x27;s an exception: if any code outside the function holds a reference to these variables after the function finishes executing, they won&#x27;t be cleaned up. Instead, a closure will be formed, and those variables will remain in memory.</p><p class="mt-4 lg:mt-6">In the example above, since the <code class="px-1 py-px text-sm bg-gray-100">Person</code> constructor function returns the inner object <code class="px-1 py-px text-sm bg-gray-100">my</code>, and since <code class="px-1 py-px text-sm bg-gray-100">my</code> refers to the local variables <code class="px-1 py-px text-sm bg-gray-100">_firstName</code> and <code class="px-1 py-px text-sm bg-gray-100">_lastName</code> (both in the getter/setters and in the <code class="px-1 py-px text-sm bg-gray-100">fullName</code> method), the variables are not destroyed. When the getter/setters are invoked, they are operating on those same local variables.</p><p class="mt-4 lg:mt-6">But why do this? Why go through this bizarre set of steps just to create what are essentially instance variables on an object - something we already know how to do? The difference between the local variables that the closure has access to and the instance variables on the objects we made earlier is that <em>the outside world does not have direct access to the local variables</em>.</p><p class="mt-4 lg:mt-6">In the objects from our first pattern, anybody with a reference to the <code class="px-1 py-px text-sm bg-gray-100">sam</code> object could change the <code class="px-1 py-px text-sm bg-gray-100">firstName</code> property to anything he pleases:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>sam</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#8CC570">&quot;Peter&quot;</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">But the only way to access the variables using the current technique are through the getter/setter methods that we attached to <code class="px-1 py-px text-sm bg-gray-100">my</code>. By attaching those methods to <code class="px-1 py-px text-sm bg-gray-100">my</code>, we made them public; but the local variables themselves remain private. We can now add validation and other logic to our getter/setters, giving us more control over our object&#x27;s interfaces.</p><p class="mt-4 lg:mt-6">So we see that closures with getter/setters give us the ability to have private properties and methods, a feature of OOP we&#x27;ve come to expect from other languages.</p><h2 id="the-best-of-both-worlds" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">The best of both worlds?</h2><p class="mt-4 lg:mt-6">As we&#x27;ve seen, prototypes (from the first pattern) give us method sharing, and closures (from the second pattern) give us private properties. A natural follow-up question is: can we have both?</p><p class="mt-4 lg:mt-6">It turns out the that there&#x27;s no way for shared methods that live on the constructor&#x27;s prototype to access the object&#x27;s hidden, private properties. This means that you effectively have to choose one or the other. But which one should you choose, and why?</p><p class="mt-4 lg:mt-6">If performance is crucial - for example, if you plan on making thousands of objects - you&#x27;ll want to go with prototypes and shared methods. Removing redundant copies of methods is going to be a suggestion that any consultant or book on performance will make.</p><p class="mt-4 lg:mt-6">On the other hand, if the object you&#x27;re making is large and complex, and is designed mainly for public consumption, the flexibility that comes with having private properties and methods will probably win out, and you&#x27;ll want to take advantage of closures. This is why libraries like jQuery and D3 tend to use closures: users will almost certainly only be using one instance of the library, which means that method sharing becomes less of an issue.</p><p class="mt-4 lg:mt-6">As a clarifying note, you can certainly use prototypes and closures on the same object. But only the closures - which are <em>not</em> shared across instances - will have access to your object&#x27;s private variables. The shared methods on the object&#x27;s prototype will not.</p><h2 id="custom-constructors-(ember.js-backbone.js-etc.)" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Custom constructors (Ember.js, Backbone.js, etc.)</h2><p class="mt-4 lg:mt-6">Sometimes when making objects within a framework or library, you&#x27;ll avoid native Javascript constructors altogether. This allows the library to have more control over the objects in your application.</p><p class="mt-4 lg:mt-6">In Ember, for example, you define objects by extending the base <code class="px-1 py-px text-sm bg-gray-100">Ember.Object</code> object, and then calling the <code class="px-1 py-px text-sm bg-gray-100">create</code> method on that object. You set properties by passing them into the constructor.</p><p class="mt-4 lg:mt-6">Here&#x27;s how it works:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#F16372">Person</span><span> </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#F16372">Ember</span><span class="token" style="color:#A9B2C0">.</span><span class="token known-class-name" style="color:#ECBE70">Object</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">extend</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token function-variable" style="color:#40B1F5">fullName</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">return</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">get</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;firstName&quot;</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#8CC570">&quot; &quot;</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">get</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;lastName&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#D373E3">var</span><span> tim </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#F16372">Person</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">create</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  firstName</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#8CC570">&quot;Tim&quot;</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span>  lastName</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#8CC570">&quot;Tebow&quot;</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span>tim</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">fullName</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#5A6371;font-style:italic">// Tim Tebow</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Custom methods like this may feel unnecessary or cumbersome, but they give a lot of power to library authors.</p><p class="mt-4 lg:mt-6">For example, one of Ember&#x27;s core features is its data bindings system, which requires that each object in an application have the ability to observe the properties of other objects. By giving developers a custom constructor function, Ember can implement this functionality in a consistent and controlled way, without requiring developers to write additional code just to mix in the behavior. So in this case, the custom constructor simplifies use of the framework for Ember developers. Underneath the hood, these custom constructors are simply wrappers around one of the two methods we covered.</p><p class="mt-4 lg:mt-6">So depending on what you&#x27;re designing and who you&#x27;re designing it for, a custom constructor function may be the way to go.</p><h2 id="no-constructor-a.k.a.-the-object-literal" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">No constructor, a.k.a. the object literal</h2><p class="mt-4 lg:mt-6">Of course, you can always create an object using no constructor at all:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> sam </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  firstName</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#8CC570">&quot;Sam&quot;</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span>  lastName</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#8CC570">&quot;Selikoff&quot;</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span>  </span><span class="token function-variable" style="color:#40B1F5">fullName</span><span class="token" style="color:#19B9C4">:</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>    </span><span class="token" style="color:#D373E3">return</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">firstName</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#8CC570">&quot; &quot;</span><span> </span><span class="token" style="color:#19B9C4">+</span><span> </span><span class="token" style="color:#D373E3">this</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">lastName</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">,</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">This is known as an object literal. But you probably are interested in writing constructors because you plan on making many objects. Object literals won&#x27;t help you there - but they do have plenty of uses, including storing configuration settings or raw data, or reducing the number of globals in your library.</p><h2 id="summary" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Summary</h2><p class="mt-4 lg:mt-6">The takeaway is that there are many ways to create objects in Javascript, each with its own costs and benefits. It&#x27;s good to know the kinds of things these patterns let you accomplish, and how other developers have used them, so you can decide for yourself when a technique is appropriate in your own work.</p><p class="mt-4 lg:mt-6">Here&#x27;s a recap of what we discussed. Hopefully the next time you need to make some objects, you&#x27;ll be better equipped to choose the appropriate method:</p><ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><p class="mt-4 lg:mt-6"><strong>Prototypes</strong> let you share public methods across objects. (They also let you use inheritance).</p></li><li class="mt-2"><p class="mt-4 lg:mt-6"><strong>Closures</strong> let you have private properties and methods. They are often used in libraries. (Closures are part of a larger pattern called the Module pattern).</p></li><li class="mt-2"><p class="mt-4 lg:mt-6"><strong>Custom constructors</strong> can be useful when building specialized APIs.</p></li><li class="mt-2"><p class="mt-4 lg:mt-6"><strong>Object literals</strong> are often used to store and pass around isolated chunks of data, like configuration settings or the parameters to an AJAX request. They can also help reduce the number of globals in your code.</p></li></ul><h2 id="learn-more" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Learn more</h2><ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><a class="text-blue-500 underline" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects">Mozilla: Working with Objects</a></li><li class="mt-2"><a class="text-blue-500 underline" href="http://stackoverflow.com/a/3658673/1406664">A great SO answer on the <code class="px-1 py-px text-sm bg-gray-100">new</code> keyword</a></li><li class="mt-2"><a class="text-blue-500 underline" href="http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/">Yehuda Katz: Understanding prototypes in Javascript</a></li><li class="mt-2"><a class="text-blue-500 underline" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures">Mozilla: Closures</a></li><li class="mt-2"><a class="text-blue-500 underline" href="http://yuiblog.com/blog/2007/06/12/module-pattern/">Eric Miraglia, a Yahoo engineer, describes the Module pattern</a></li><li class="mt-2"><a class="text-blue-500 underline" href="http://bost.ocks.org/mike/chart/">Mike Bostock, the author of D3, suggests using closures to build reusable charts</a></li><li class="mt-2"><a class="text-blue-500 underline" href="http://www.crockford.com/javascript/private.html">Douglas Crockford: Private Members in Javascript</a></li></ul></article><p class="pt-8 text-sm font-medium text-right text-gray-500 md:mt-1">November 14, 2013</p><hr class="mt-10"/><div class="mt-10"><div><a class="block w-16 h-16 mx-auto overflow-hidden rounded-full" href="/"><div style="max-width:100%;width:985px"><div style="position:relative;padding-bottom:100%"><img data-src="/_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=1024&amp;q=75" data-srcset="/_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=320&amp;q=75 320w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=420&amp;q=75 420w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=768&amp;q=75 768w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=1024&amp;q=75 1024w" class="__lazy" style="visibility:hidden;height:100%;left:0;position:absolute;top:0;width:100%"/></div></div></a></div><div class="mt-2 leading-none text-center"><p class="pt-2 text-xs font-semibold tracking-wider text-gray-600 uppercase">Written by</p><p class="pt-2 text-xl font-semibold"><a href="/">Sam Selikoff</a></p></div></div><div class="pb-24 mt-8 text-center"><a class="font-medium text-blue-500" href="/blog">← View all posts</a></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/some-Javascript-constructor-patterns","query":{},"buildId":"rc4hxD8C_pz-l0Zida7Fo","assetPrefix":"/new-profile","nextExport":true,"autoExport":true,"isFallback":false,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"apple-touch-icon","sizes":"57x57","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"60x60","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"72x72","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"76x76","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"114x114","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"120x120","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"144x144","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"152x152","href":"/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"180x180","href":"/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"192x192","href":"/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"32x32","href":"/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"96x96","href":"/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"16x16","href":"/isotype.png"}],["link",{"rel":"manifest","href":"/manifest.json"}],["meta",{"name":"msapplication-TileColor","content":"#ffffff"}],["meta",{"name":"msapplication-TileImage","content":"/isotype.png"}],["meta",{"name":"theme-color","content":"#ffffff"}],["title",{"children":"Some Javascript constructor patterns, and when to use them"}]]}</script><script nomodule="" src="/new-profile/_next/static/chunks/polyfills-f9ac226678fc858257de.js"></script><script src="/new-profile/_next/static/chunks/main-5ab6ea82c9087f336e12.js" async=""></script><script src="/new-profile/_next/static/chunks/webpack-38f4ef47162466e52626.js" async=""></script><script src="/new-profile/_next/static/chunks/framework.7008427c9ed7ea1ea070.js" async=""></script><script src="/new-profile/_next/static/chunks/1ca0266d.bc7564fa166f0d34b14f.js" async=""></script><script src="/new-profile/_next/static/chunks/commons.c903b9c5c3d275f65bfc.js" async=""></script><script src="/new-profile/_next/static/chunks/74dccfed65656dfb6adb258ae839e136f67e0276.47b8922ced02d1ddaa2f.js" async=""></script><script src="/new-profile/_next/static/chunks/2412aec2c30a40454afb28aa7ad51596c664a3e6.1e80e1ab8448746fa0db.js" async=""></script><script src="/new-profile/_next/static/chunks/pages/_app-52d859afcfe46e563952.js" async=""></script><script src="/new-profile/_next/static/chunks/57c9d6e4b97e6bcf244aee8ce3648d5d9adaacb1.bfcec4d669b9affd02e0.js" async=""></script><script src="/new-profile/_next/static/chunks/798fd9b41a459e61ee4594ce38d25c96f259064c.8c8bea5984a65dd9a41b.js" async=""></script><script src="/new-profile/_next/static/chunks/pages/blog/some-Javascript-constructor-patterns-a11532ffd2075662f1f1.js" async=""></script><script src="/new-profile/_next/static/rc4hxD8C_pz-l0Zida7Fo/_buildManifest.js" async=""></script><script src="/new-profile/_next/static/rc4hxD8C_pz-l0Zida7Fo/_ssgManifest.js" async=""></script></body></html>