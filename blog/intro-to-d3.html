<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="57x57" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="60x60" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="72x72" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="76x76" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="114x114" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="120x120" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="144x144" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="152x152" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="icon" type="image/png" sizes="192x192" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="icon" type="image/png" sizes="96x96" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"/><meta name="theme-color" content="#ffffff"/><title>An Introduction to D3</title><link rel="preload" href="/new-profile/_next/static/css/8e1df1737e67450786cc.css" as="style"/><link rel="stylesheet" href="/new-profile/_next/static/css/8e1df1737e67450786cc.css" data-n-g=""/><link rel="preload" href="/new-profile/_next/static/css/bc9bbcd6fea02b72560a.css" as="style"/><link rel="stylesheet" href="/new-profile/_next/static/css/bc9bbcd6fea02b72560a.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/new-profile/_next/static/chunks/main-5ab6ea82c9087f336e12.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/webpack-38f4ef47162466e52626.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/framework.7008427c9ed7ea1ea070.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/1ca0266d.bc7564fa166f0d34b14f.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/commons.c903b9c5c3d275f65bfc.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/74dccfed65656dfb6adb258ae839e136f67e0276.47b8922ced02d1ddaa2f.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/2412aec2c30a40454afb28aa7ad51596c664a3e6.1e80e1ab8448746fa0db.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/pages/_app-3f00c45ba3d6396804fc.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/57c9d6e4b97e6bcf244aee8ce3648d5d9adaacb1.bfcec4d669b9affd02e0.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/798fd9b41a459e61ee4594ce38d25c96f259064c.8c8bea5984a65dd9a41b.js" as="script"/><link rel="preload" href="/new-profile/_next/static/chunks/pages/blog/intro-to-d3-1e496ff5e570fa70fba1.js" as="script"/></head><body><div id="__next"><div class="flex flex-col min-h-screen font-sans text-base antialiased text-gray-800"><header class="px-6"><div class="pt-4 mx-auto max-w-7xl md:pt-6 xl:pt-8"><div class="flex justify-between pb-4 md:pb-0 md:border-b md:border-gray-200 md:justify-start"><a class="text-sm font-light tracking-wide uppercase md:text-base lg:text-xl" href="/"><span class="font-bold">Frank</span>Cary</a><button class="p-2 -m-2 text-gray-700 focus:outline-none md:hidden"><svg fill="currentColor" viewBox="0 0 20 20" class="block w-4 h-4"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></button><div class="items-center hidden ml-auto md:flex"><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/projects">Projects</a><a class="pb-4 ml-6 -mb-px text-gray-600 border-b border-transparent xl:pb-6 lg:ml-8 lg:text-base xl:text-lg hover:text-gray-900" href="/contact">Contact</a></div></div><div class="md:hidden"></div></div></header><main class="flex flex-col flex-1"><div class="px-6 pt-6 md:pt-12 lg:pt-16 md:leading-relaxed md:text-lg- lg:text-lg"><div class="max-w-measure mx-auto"><article><div class="mb-8 md:mb-10"><h1 class="mt-8 text-3xl font-semibold leading-tight md:text-4xl lg:text-4-5xl">An Introduction to D3</h1></div><p class="mt-4 lg:mt-6"><a class="text-blue-500 underline" href="http://www.d3js.org">D3.js</a> is a JavaScript library used to create interactive visualizations in the browser. This tutorial discusses some motivations for learning D3, presents a brief introduction to the library, and concludes with some thoughts on big data.</p><ol class="pl-6 mt-4 list-decimal lg:mt-6"><li class="mt-2"><p class="mt-4 lg:mt-6"><a class="text-blue-500 underline" href="#why-data-vis">Why data vis?</a></p><ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><a class="text-blue-500 underline" href="#whats-d3">What&#x27;s D3?</a></li><li class="mt-2"><a class="text-blue-500 underline" href="#what-d3-isnt">What D3 isn&#x27;t</a></li><li class="mt-2"><a class="text-blue-500 underline" href="#can-d3-help-in-the-context-of-big-data">Can D3 help in the context of big data?</a></li></ul></li><li class="mt-2"><p class="mt-4 lg:mt-6"><a class="text-blue-500 underline" href="#learning-d3">Learning D3</a></p><ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><a class="text-blue-500 underline" href="#a-first-look-at-selections">A first look at Selections</a></li><li class="mt-2"><a class="text-blue-500 underline" href="#selecting-arrays-of-elements">Selecting arrays of elements</a></li><li class="mt-2"><a class="text-blue-500 underline" href="#selecting-no-elements">Selecting no elements</a></li><li class="mt-2"><a class="text-blue-500 underline" href="#the-data-join-and-subselections">The data join and subselections</a></li><li class="mt-2"><a class="text-blue-500 underline" href="#data-is-stored-in-the-dom">Data is stored in the DOM</a></li><li class="mt-2"><a class="text-blue-500 underline" href="#using-data-driven-transformations-to-finish-the-chart">Using data-driven transformations to finish the chart</a></li></ul></li><li class="mt-2"><p class="mt-4 lg:mt-6"><a class="text-blue-500 underline" href="#some-concluding-thoughts-on-d3-and-big-data">Some concluding thoughts on D3 and big data</a></p></li></ol><h2 id="why-data-vis" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Why data vis?</h2><p class="mt-4 lg:mt-6">&quot;Big Data&quot; is something of a buzzword, but beneath it is an important idea: that data can be so complex, it&#x27;s incomprehensible.</p><p class="mt-4 lg:mt-6">Data visualization is an answer to this problem. Visualizations distill lots of information into something we humans can understand, typically by focusing on an aggregate or subset view of the data.</p><p class="mt-4 lg:mt-6">Visualizations help in two ways: <em>communication</em> and <em>exploration</em>. Take this press release about Apple&#x27;s revenues:</p><blockquote class="pl-4 italic border-l-4 border-gray-200"><p class="mt-4 lg:mt-6">Apple today announced financial results for its fiscal 2013 fourth quarter ended September 28, 2013. The Company posted quarterly revenue of $37.5 billion and quarterly net profit of $7.5 billion, or $8.26 per diluted share. These results compare to revenue of $36 billion and net profit of $8.2 billion, or $8.67 per diluted share, in the year-ago quarter. Gross margin was 37 percent compared to 40 percent in the year-ago quarter. International sales accounted for 60 percent of the quarterâ€™s revenue. (<a class="text-blue-500 underline" href="http://www.apple.com/pr/library/2013/10/28Apple-Reports-Fourth-Quarter-Results.html?sr=hotnews.rss">source</a>)</p></blockquote><p class="mt-4 lg:mt-6">How long did it take you to consume this information? Now consider this stock price chart:</p><img class="mt-4 lg:mt-6" src="/_next/static/media/stock-chart.a62e45eb80e68410b6e4455a48ae09db.png"/><p class="mt-4 lg:mt-6">How long did it take you to understand the main trend of the chart? Do you feel like you have a better grasp of the data? By increasing the density of information, data visualization helps us communicate our insights quickly and effectively.</p><p class="mt-4 lg:mt-6">Visualizations also help us explore. Sometimes we don&#x27;t know anything about our data, and investigating it in its raw form is impractical. We can use data vis to present the data in a form more suitable for exploration. Look at this calendar chart, which shows daily percentage changes in the DOW stock index over several years:</p><img class="mt-4 lg:mt-6" src="/_next/static/media/calendar-chart.e8eb804ca46a5b27a2c7db98ccfa2ef6.png"/><p class="mt-4 lg:mt-6"><em>Source: <a class="text-blue-500 underline" href="http://bl.ocks.org/mbostock/4063318">http://bl.ocks.org/mbostock/4063318</a></em></p><p class="mt-4 lg:mt-6">With this chart, we&#x27;re able to quickly scan several years of data and see if there&#x27;s anything interesting; indeed, the end of 2008 seems to merit further exploration.</p><p class="mt-4 lg:mt-6">So data vis is about more than just making pretty charts. By facilitating communication and exploration, visualizations make our data more valuable.</p><h2 id="what&#x27;s-d3" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">What&#x27;s D3?</h2><p class="mt-4 lg:mt-6">D3 stands for Data-Driven Documents. Sounds like it could be useful for big data - but what does it mean?</p><p class="mt-4 lg:mt-6">The word &quot;document&quot; in D3 refers to the DOM, which is what you see when you view a webpage (like this one). It&#x27;s the parsed and rendered HTML and CSS. But it&#x27;s more than that; it&#x27;s a living, breathing thing. Javascript can manipulate the DOM, creating and deleting pieces of it. It&#x27;s what enables web applications to be dynamic and interactive.</p><p class="mt-4 lg:mt-6">At a higher level, the DOM is an agreed-upon set of terms for representing, updating, and querying information from documents. It makes CSS queries and DOM events possible. It&#x27;s the raw stuff of the browser that all web developers are familiar with.</p><p class="mt-4 lg:mt-6">Over time, JavaScript development on the web has gotten better, and we&#x27;ve learned how to do some pretty cool things. We&#x27;ve used libraries like jQuery to iron out cross-browser issues and we&#x27;ve built plugins to make our UIs more interactive. But most of these innovations are related to GUI programming - because most of the time, we&#x27;re building user interfaces for web applications.</p><p class="mt-4 lg:mt-6">But we&#x27;re here to create data visualizations! And data vis isn&#x27;t quite the same as GUI programming. It&#x27;s about mapping data (say, a time series dataset) to elements on the screen (bars, circles, or points).</p><p class="mt-4 lg:mt-6">Building visualizations with tools that are suited for GUI programming is difficult and verbose. For example, if we were to set the heights of some hypothetical bars in an HTML document with vanilla JavaScript, it&#x27;d look something like this:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> nums </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#A9B2C0">[</span><span class="token" style="color:#DB975C">80</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">53</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">125</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">200</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">28</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">97</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#D373E3">var</span><span> bars </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token dom" style="color:#F16372">document</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">getElementsByTagName</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#D373E3">for</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#D373E3">var</span><span> i </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#DB975C">0</span><span class="token" style="color:#A9B2C0">;</span><span> i </span><span class="token" style="color:#19B9C4">&lt;</span><span> bars</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">length</span><span class="token" style="color:#A9B2C0">;</span><span> i</span><span class="token" style="color:#19B9C4">++</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">var</span><span> bar </span><span class="token" style="color:#19B9C4">=</span><span> bars</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">item</span><span class="token" style="color:#A9B2C0">(</span><span>i</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>  bar</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">setAttribute</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;height&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> nums</span><span class="token" style="color:#A9B2C0">[</span><span>i</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">With D3, it&#x27;s</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>d3</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">selectAll</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;height&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">d</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> i</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">return</span><span> nums</span><span class="token" style="color:#A9B2C0">[</span><span>i</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">In addition to using less code, the second approach has a few benefits:</p><ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><p class="mt-4 lg:mt-6">D3 embraces <a class="text-blue-500 underline" href="http://en.wikipedia.org/wiki/Declarative_programming">declarative programming</a>, and we can see that here: we&#x27;re able to set the height of all elements in the collection using <code class="px-1 py-px text-sm bg-gray-100">.attr</code>, rather than having to set them individually using a <code class="px-1 py-px text-sm bg-gray-100">for</code> loop. Declarative code abstracts away implementation details, making complicated transformations easier to reason about. It&#x27;s a powerful paradigm, but definitely takes some getting used to.</p></li><li class="mt-2"><p class="mt-4 lg:mt-6">We&#x27;re getting a little ahead of ourselves, but as you can see we&#x27;re using a function to set the heights. And this function is smart; it <em>knows</em> about our data, and makes the relevant datum (and index) available to the transformation. This is how we can set attributes of elements in a data-driven way.</p></li></ul><p class="mt-4 lg:mt-6">So D3 is really about giving us an API that&#x27;s well-suited for creating and updating the DOM based on our data - hence the name Data-Driven Documents.</p><h2 id="what-d3-isn&#x27;t" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">What D3 isn&#x27;t</h2><p class="mt-4 lg:mt-6">It may surprise you to learn that D3 doesn&#x27;t come with any prebuilt visualizations; there&#x27;s no <code class="px-1 py-px text-sm bg-gray-100">d3.barchart</code>, for instance. That&#x27;s because D3 aims to be low-level and flexible. There are many excellent charting libraries out there, several of them built with D3. If your goal is to render a few standard charts as quickly as possible, you may want to consider using a library instead of writing D3 code by hand.</p><p class="mt-4 lg:mt-6">D3 is also not a compatability layer, though it does take care of a few cross-browser quirks. D3 is built to work in modern browsers.</p><p class="mt-4 lg:mt-6">Finally, you should know that D3 is about web standards. Recall that the first D in D3 refers to the DOM. That&#x27;s web standards talk: HTML, CSS, and JavaScript. There&#x27;s no new technology here, no Flash, Java applets or proprietary plugins. D3 works in any modern browser on any device, out of the box. So learning D3 involves learning about web standards and modern web development.</p><h2 id="can-d3-help-in-the-context-of-big-data" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Can D3 help in the context of big data?</h2><p class="mt-4 lg:mt-6">Because it is low-level, D3 may seem like a bad fit for big data analysis. Indeed, it won&#x27;t help you run gigabytes of data through a model; but once you use some other tool to do this, D3 can help you make sense of the result.</p><p class="mt-4 lg:mt-6">Recall the two primary uses of data visualization: explanation, and exploration.</p><p class="mt-4 lg:mt-6">If you have some unique insight about a dataset, D3 gives you the control to communicate it effectively.</p><img class="mt-4 lg:mt-6" src="/_next/static/media/nominees.6b9d69d1e401e510c9082eb474a92281.png"/><p class="mt-4 lg:mt-6">This screenshot is taken from a <a class="text-blue-500 underline" href="http://www.nytimes.com/interactive/2013/02/20/movies/among-the-oscar-contenders-a-host-of-connections.html?_r=0">New York Times interactive</a>, and shows various relationships among Oscar nominees. These authors could have written an article, but instead used data vis to create a compelling (and beautiful) diagram of their insights. This is a pretty unique visualization - and the point is, it&#x27;s not found in Excel&#x27;s built-in charts.</p><p class="mt-4 lg:mt-6">So if you have a specific idea or concept you want to explain - which people in big data often do - learning D3 can give you the power to do so in a unique and effective way.</p><p class="mt-4 lg:mt-6">Second, if you&#x27;re focused on exploring data, D3 can be useful - but don&#x27;t underestimate the learning curve. If you need to crank out a dozen pie and bar charts by the end of the week, you probably shouldn&#x27;t write them from scratch using D3. Instead, use a library with built-in visualizations, like <a class="text-blue-500 underline" href="http://code.shutterstock.com/rickshaw/">Rickshaw</a>, <a class="text-blue-500 underline" href="http://www.highcharts.com/">Highcharts</a> or <a class="text-blue-500 underline" href="http://nvd3.org/">NVD3</a>.</p><p class="mt-4 lg:mt-6">Sometimes, though, existing solutions aren&#x27;t enough, and you need a custom way to explore your data. Remember the calendar chart from above? It was very useful for detecting trends, and it&#x27;s also not available in Excel. So D3 can be a valuable aid in data exploration, as it gives you control over your data&#x27;s representation, and lets you add interactivity.</p><p class="mt-4 lg:mt-6">Alright, enough ceremony. Lets learn it!</p><h2 id="learning-d3" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Learning D3</h2><p class="mt-4 lg:mt-6">This tutorial won&#x27;t cover all the parts of the D3 toolbelt; there are plenty of existing resources that do that. Instead, it will introduce some of the library&#x27;s main conceptual hurdles: selections and data bindings. Once you get a handle on these, the code in the <a class="text-blue-500 underline" href="https://github.com/mbostock/d3/wiki/Gallery">scores of community examples</a> should make much more sense, and with <a class="text-blue-500 underline" href="https://github.com/mbostock/d3/wiki/API-Reference">D3&#x27;s documentation</a> by your side you&#x27;ll be ready to start working on your own.</p><p class="mt-4 lg:mt-6">I like learning through examples, so in this tutorial we&#x27;ll build a simple bar chart:</p><div class="mt-4"><div id="chart1"></div></div><p class="mt-4 lg:mt-6">Not as exciting as some of the examples you&#x27;ve seen, I know. But its simplicity will help us focus on D3&#x27;s primitives.</p><p class="mt-4 lg:mt-6">The chart is rendered in SVG; open up the inspector (<code class="px-1 py-px text-sm bg-gray-100">Command-Option-I</code> on Mac, <code class="px-1 py-px text-sm bg-gray-100">Ctrl-Shift-I</code> on Windows) and see for yourself:</p><img class="mt-4 lg:mt-6" src="/_next/static/media/inspector.03ecea810950bd1177021605a6f2447a.png"/><p class="mt-4 lg:mt-6">The SVG is right there in the DOM, the same place as the rest of this document. Its parsed and ready to style and manipulate.</p><p class="mt-4 lg:mt-6">D3 is not just about SVG; we can use it to create an HTML table, for instance. But SVG lets us do far more than we could with just CSS and the standard HTML elements.</p><h2 id="a-first-look-at-selections" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">A first look at Selections</h2><p class="mt-4 lg:mt-6">To start out, say our initial document is</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-html subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-html" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">html</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">script</span><span class="token" style="color:#F16372"> </span><span class="token token" style="color:#8CC570">src</span><span class="token token token attr-equals" style="color:#A9B2C0">=</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token token" style="color:#ECBE70">d3.v3.min.js</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token" style="color:#F16372"> </span><span class="token token" style="color:#8CC570">charset</span><span class="token token token attr-equals" style="color:#A9B2C0">=</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token token" style="color:#ECBE70">utf-8</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">script</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">script</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">      </span><span class="token script token language-javascript token" style="color:#5A6371;font-style:italic">// Our code</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">    </span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">script</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">html</span><span class="token token" style="color:#A9B2C0">&gt;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6"><em>We&#x27;re referencing a local copy of D3 here; you can also link directly to the latest release with <code class="px-1 py-px text-sm bg-gray-100">src=&quot;http://d3js.org/d3.v3.min.js&quot;</code>.</em></p><p class="mt-4 lg:mt-6">The data driving this chart is a simple array:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> nums </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#A9B2C0">[</span><span class="token" style="color:#DB975C">80</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">53</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">125</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">200</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">28</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">97</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Now, the bars are actually SVG <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> elements. To render an SVG rectangle, we first need an <code class="px-1 py-px text-sm bg-gray-100">&lt;svg&gt;</code> container element. Let&#x27;s add one to the DOM:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>d3</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">select</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;body&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;svg&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Breaking this down, <code class="px-1 py-px text-sm bg-gray-100">d3</code> is the D3 global object - think <code class="px-1 py-px text-sm bg-gray-100">$</code> from jQuery. And also similar to jQuery, <code class="px-1 py-px text-sm bg-gray-100">d3</code> lets us select elements in the DOM. Here we&#x27;re selecting the <code class="px-1 py-px text-sm bg-gray-100">&lt;body&gt;</code> element.</p><p class="mt-4 lg:mt-6">Selecting something in D3 produces a <a class="text-blue-500 underline" href="https://github.com/mbostock/d3/wiki/Selections">D3 selection</a>. <strong>Selections</strong> are at the heart of D3; we&#x27;ll see their full power soon. For now, just think of a selection as an object that wraps a DOM element and provides some useful methods.</p><p class="mt-4 lg:mt-6"><em>One commonly used method is <code class="px-1 py-px text-sm bg-gray-100">.style</code>, which lets you change CSS properties. Try running this in the console: <code class="px-1 py-px text-sm bg-gray-100">d3.select(&#x27;body&#x27;).style(&#x27;background-color&#x27;, &#x27;blue&#x27;);</code></em></p><p class="mt-4 lg:mt-6">Above, we used the <code class="px-1 py-px text-sm bg-gray-100">append</code> method on a selection to create an <code class="px-1 py-px text-sm bg-gray-100">&lt;svg&gt;</code> element. Because we typically append things to the DOM in order to do something with them, D3 conveniently returns a new selection after calling <code class="px-1 py-px text-sm bg-gray-100">.append()</code>. This new selection wraps the newly created element, letting us write the following:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> svg </span><span class="token" style="color:#19B9C4">=</span><span> d3</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">select</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;body&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;svg&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Now, we can work with this local variable <code class="px-1 py-px text-sm bg-gray-100">svg</code>, just as if we had written <code class="px-1 py-px text-sm bg-gray-100">d3.select(&#x27;svg&#x27;)</code>. Since the SVG element acts as a viewport for all the other elements we&#x27;ll be adding to it, we also need to set its width and height:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-diff subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-diff" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>var svg = d3.select(&#x27;body&#x27;).append(&#x27;svg&#x27;)
</span></span><span><span></span><span class="token inserted-sign token prefix" style="color:#8CC570">+</span><span class="token inserted-sign token line" style="color:#8CC570">   .attr(&#x27;width&#x27;, 200)
</span></span><span><span class="token inserted-sign token line" style="color:#8CC570"></span><span class="token inserted-sign token prefix" style="color:#8CC570">+</span><span class="token inserted-sign token line" style="color:#8CC570">   .attr(&#x27;height&#x27;, 200);</span></span></code></pre></div></div><h2 id="selecting-arrays-of-elements" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Selecting arrays of elements</h2><p class="mt-4 lg:mt-6">It&#x27;s time to create some <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> elements. One way is to just <code class="px-1 py-px text-sm bg-gray-100">append</code> them, like we did the <code class="px-1 py-px text-sm bg-gray-100">svg</code> element. We have six data points, so let&#x27;s append six rectangles:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#5A6371;font-style:italic">// Recall, var nums = [80, 53, 125, 200, 28, 97];</span><span>
</span></span><span>
</span><span><span>svg</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>svg</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>svg</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>svg</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>svg</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>svg</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Indeed this works - you can try it yourself in the inspector. But this is D3, and the whole point is to use data to drive the creation of our documents. Clearly, this solution falls short. Before we see how it&#x27;s really done, we need to learn more about selections.</p><p class="mt-4 lg:mt-6">We&#x27;ve seen <code class="px-1 py-px text-sm bg-gray-100">d3.select</code> used on single elements, like <code class="px-1 py-px text-sm bg-gray-100">d3.select(&#x27;body&#x27;)</code> and <code class="px-1 py-px text-sm bg-gray-100">d3.select(&#x27;svg&#x27;)</code>. But there&#x27;s another method in D3 that produces a selection: <code class="px-1 py-px text-sm bg-gray-100">d3.selectAll()</code>. This selection wraps an <em>array</em> of all matching elements, instead of just the first matched element on the page. For example,</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> paragraphs </span><span class="token" style="color:#19B9C4">=</span><span> d3</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">selectAll</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;p&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">returns a D3 selection wrapping all <code class="px-1 py-px text-sm bg-gray-100">&lt;p&gt;</code> tags on the page.</p><p class="mt-4 lg:mt-6">Even though these selections wrap arrays of element, the selection itself is still singular; there is only one selection. So, what is a selection, really? We can select single elements, or groups of them, but what does the selection itself represent?</p><p class="mt-4 lg:mt-6">Think of selections as higher-level than the DOM elements themselves. A selection is a managing object that references some set of elements in the DOM; it knows details about them, and can apply transformations to them, but it also knows more.</p><p class="mt-4 lg:mt-6"><strong>Understanding selections is central to using D3.</strong> It takes some time to wrap your head around them, so after playing with the code a bit, be sure to read as much as you can about them from the docs and other tutorials.</p><p class="mt-4 lg:mt-6">Now, remember when we changed the color of the <code class="px-1 py-px text-sm bg-gray-100">&lt;body&gt;</code> element earlier? If you wanted to do that for all the paragraphs in our page, you might try something like this:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>paragraphs</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">forEach</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">p</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  p</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">style</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;background-color&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#8CC570">&quot;green&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">But this is not how we do things in D3. Remember, a selection should be thought of and acted upon as a single managing object. So when it comes time to transform elements in the DOM, you operate on the selection itself:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>paragraphs</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">style</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;background-color&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#8CC570">&quot;green&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">The selection applies the transformation to each element it references.</p><p class="mt-4 lg:mt-6">This style of programming is called <em>declarative programming</em>, because we declare our intention (<em>what</em> we want to do), rather than imperative programming, where we write out each step our program takes to accomplish a given task (<em>how</em> to do it).</p><p class="mt-4 lg:mt-6">As you can already see, declarative programming is a powerful abstraction that reduces complexity and opens the door for more powerful code. It is the programming style D3 has adopted.</p><h2 id="selecting-no-elements" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Selecting no elements</h2><p class="mt-4 lg:mt-6">We now come to an interesting twist. Say our DOM looks like this:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-html subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-html" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">svg</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">svg</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">We can use <code class="px-1 py-px text-sm bg-gray-100">selectAll</code> to grab the bars:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> bars </span><span class="token" style="color:#19B9C4">=</span><span> d3</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">selectAll</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">which gives us a selection that wraps all six elements in the page. But what if we selected the bars before we appended them? Say our DOM looked like this</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-html subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-html" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">svg</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">svg</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">and we wrote this</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> bars </span><span class="token" style="color:#19B9C4">=</span><span> d3</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">selectAll</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Clearly, we&#x27;re selecting something that doesn&#x27;t exist, so it will return null - right? It&#x27;s as if we applied a CSS rule to a <code class="px-1 py-px text-sm bg-gray-100">#home</code> element that doesn&#x27;t exist, or used jQuery to find all the <code class="px-1 py-px text-sm bg-gray-100">&lt;h5&gt;</code> elements - <code class="px-1 py-px text-sm bg-gray-100">$(&#x27;h5&#x27;)</code> - but none are in the DOM. So we should get a null response, an empty set, a vacuous solution.</p><p class="mt-4 lg:mt-6">Actually, even though our selection <em>is</em> empty, the return value is not vacuous. Remember, selections are higher-level than the actual DOM elements themselves. In this case, <code class="px-1 py-px text-sm bg-gray-100">bars</code> doesn&#x27;t refer to anything that actually exists in the DOM; but it still <em>represents</em> an array of <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> elements.</p><p class="mt-4 lg:mt-6">So, you can think of selections as having two pieces:</p><div id="selections1"></div><p class="mt-4 lg:mt-6">The first is this Platonic piece that represents elements in the abstract; think, <em>a single body tag</em>, or <em>an array of rect elements</em>. These things don&#x27;t actually exist anywhere. The second piece is the actual set of elements the selection matched in the current DOM - for example, the six <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> elements that we can see in the inspector, right now.</p><p class="mt-4 lg:mt-6">Having both pieces is key to how D3 operates.</p><h2 id="the-data-join-and-subselections" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">The data join and subselections</h2><p class="mt-4 lg:mt-6">As you may have guessed, D3 can compare both parts of a selection - the elements that the selection represents, and the elements that the selection matched in the DOM - and tell us how they&#x27;re similar, and how they&#x27;re different.</p><p class="mt-4 lg:mt-6">The elements matched in the DOM simply come from the DOM - so getting them is easy. But how does D3 know what our selection should represent? So far, it has either represented a single element, or an array of elements. But how big is the array? And what are the actual elements of the array which the selection refers to? <em>An array of rect elements</em> is very different from <em>an array of three rect elements whose values are 2, 5 and 10</em>.</p><p class="mt-4 lg:mt-6">This is where the <strong>data join</strong> comes in. The data join gives us a way to specify exactly what our selections represent. We use it like this:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> nums </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#A9B2C0">[</span><span class="token" style="color:#DB975C">80</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">53</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">125</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">200</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">28</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">97</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#D373E3">var</span><span> bars </span><span class="token" style="color:#19B9C4">=</span><span> svg</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">selectAll</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">data</span><span class="token" style="color:#A9B2C0">(</span><span>nums</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">// there it is!</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Now we have a selection, but one that is bound to data. D3 knows <em>exactly</em> what that selection represents: an array of six different <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> elements, and each element maps to the corresponding item in the array (the first <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> corresponds to 80, the second to 53, and so on).</p><p class="mt-4 lg:mt-6"><em>In this simple example, rectangles are mapped to data via their index in the array. You can use <a class="text-blue-500 underline" href="https://github.com/mbostock/d3/wiki/Selections#wiki-data">key</a> functions for more complicated mapping.</em></p><p class="mt-4 lg:mt-6">Now that D3 knows exactly what our selection represents, and it also knows what&#x27;s currently in the DOM (since it performed a <code class="px-1 py-px text-sm bg-gray-100">.selectAll()</code>), it can tell us what&#x27;s similar and what&#x27;s different between these two pieces. It does this by creating <strong>subselections</strong>: selections that represent a subset of the original selection.</p><p class="mt-4 lg:mt-6">There are three subselections in D3: <strong>enter</strong>, <strong>exit</strong>, and <strong>update</strong>:</p><div id="selections2"></div><p class="mt-4 lg:mt-6"><em>Diagram adapted from <a class="text-blue-500 underline" href="http://bost.ocks.org/mike/join/">http://bost.ocks.org/mike/join/</a></em></p><p class="mt-4 lg:mt-6">The names are appropriate:</p><ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><p class="mt-4 lg:mt-6"><strong>enter</strong> refers to elements in the data that were joined to our selection, but that aren&#x27;t currently in the DOM. Typically these elements will be entering the DOM via <code class="px-1 py-px text-sm bg-gray-100">.append()</code> - hence the name <em>enter</em>.</p></li><li class="mt-2"><p class="mt-4 lg:mt-6"><strong>exit</strong> refers to elements in the current DOM, but not in the data that was joined to the selection. Typically these will be exiting the DOM via <code class="px-1 py-px text-sm bg-gray-100">.remove()</code>.</p></li><li class="mt-2"><p class="mt-4 lg:mt-6"><strong>update</strong> refers to elements present in both groups.</p></li></ul><p class="mt-4 lg:mt-6">So how does this look in practice? Recall what we&#x27;re trying to do: create bars. We&#x27;re working with the following selection,</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> nums </span><span class="token" style="color:#19B9C4">=</span><span> </span><span class="token" style="color:#A9B2C0">[</span><span class="token" style="color:#DB975C">80</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">53</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">125</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">200</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">28</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">97</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#D373E3">var</span><span> bars </span><span class="token" style="color:#19B9C4">=</span><span> svg</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">selectAll</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">data</span><span class="token" style="color:#A9B2C0">(</span><span>nums</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">but the <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> elements don&#x27;t exist in the DOM. That means there are six rects in our enter subselection. We access them like this:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>bars</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">enter</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Now we have a hold of the new elements, and we can do whatever we want with them. In this case, for each element in our representation, we want to append an actual <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> element to the DOM:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>bars</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">enter</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">append</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">If you try this out yourself, the DOM will be what you expect.</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-html subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-html" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#5A6371;font-style:italic">&lt;!-- From this...  --&gt;</span><span>
</span></span><span><span></span><span class="token token" style="color:#A9B2C0">&lt;!</span><span class="token token doctype-tag" style="color:#5A6371">DOCTYPE</span><span class="token" style="color:#5A6371"> </span><span class="token token name" style="color:#5A6371">html</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">html</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">script</span><span class="token" style="color:#F16372"> </span><span class="token token" style="color:#8CC570">src</span><span class="token token token attr-equals" style="color:#A9B2C0">=</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token token" style="color:#ECBE70">http://d3js.org/d3.v3.min.js</span><span class="token token token" style="color:#A9B2C0">&quot;</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">script</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>    </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">script</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">      </span><span class="token script token language-javascript token" style="color:#D373E3">var</span><span class="token script token language-javascript"> nums </span><span class="token script token language-javascript token" style="color:#19B9C4">=</span><span class="token script token language-javascript"> </span><span class="token script token language-javascript token" style="color:#A9B2C0">[</span><span class="token script token language-javascript token" style="color:#DB975C">80</span><span class="token script token language-javascript token" style="color:#A9B2C0">,</span><span class="token script token language-javascript"> </span><span class="token script token language-javascript token" style="color:#DB975C">53</span><span class="token script token language-javascript token" style="color:#A9B2C0">,</span><span class="token script token language-javascript"> </span><span class="token script token language-javascript token" style="color:#DB975C">125</span><span class="token script token language-javascript token" style="color:#A9B2C0">,</span><span class="token script token language-javascript"> </span><span class="token script token language-javascript token" style="color:#DB975C">200</span><span class="token script token language-javascript token" style="color:#A9B2C0">,</span><span class="token script token language-javascript"> </span><span class="token script token language-javascript token" style="color:#DB975C">28</span><span class="token script token language-javascript token" style="color:#A9B2C0">,</span><span class="token script token language-javascript"> </span><span class="token script token language-javascript token" style="color:#DB975C">97</span><span class="token script token language-javascript token" style="color:#A9B2C0">]</span><span class="token script token language-javascript token" style="color:#A9B2C0">;</span><span class="token script token language-javascript">
</span></span><span class="token script token language-javascript">
</span><span><span class="token script token language-javascript">      </span><span class="token script token language-javascript token" style="color:#D373E3">var</span><span class="token script token language-javascript"> svg </span><span class="token script token language-javascript token" style="color:#19B9C4">=</span><span class="token script token language-javascript"> d3
</span></span><span><span class="token script token language-javascript">        </span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token method" style="color:#40B1F5">select</span><span class="token script token language-javascript token" style="color:#A9B2C0">(</span><span class="token script token language-javascript token" style="color:#8CC570">&quot;body&quot;</span><span class="token script token language-javascript token" style="color:#A9B2C0">)</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">        </span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token method" style="color:#40B1F5">append</span><span class="token script token language-javascript token" style="color:#A9B2C0">(</span><span class="token script token language-javascript token" style="color:#8CC570">&quot;svg&quot;</span><span class="token script token language-javascript token" style="color:#A9B2C0">)</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">        </span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token method" style="color:#40B1F5">attr</span><span class="token script token language-javascript token" style="color:#A9B2C0">(</span><span class="token script token language-javascript token" style="color:#8CC570">&quot;height&quot;</span><span class="token script token language-javascript token" style="color:#A9B2C0">,</span><span class="token script token language-javascript"> </span><span class="token script token language-javascript token" style="color:#DB975C">200</span><span class="token script token language-javascript token" style="color:#A9B2C0">)</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">        </span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token method" style="color:#40B1F5">attr</span><span class="token script token language-javascript token" style="color:#A9B2C0">(</span><span class="token script token language-javascript token" style="color:#8CC570">&quot;width&quot;</span><span class="token script token language-javascript token" style="color:#A9B2C0">,</span><span class="token script token language-javascript"> </span><span class="token script token language-javascript token" style="color:#DB975C">200</span><span class="token script token language-javascript token" style="color:#A9B2C0">)</span><span class="token script token language-javascript token" style="color:#A9B2C0">;</span><span class="token script token language-javascript">
</span></span><span class="token script token language-javascript">
</span><span><span class="token script token language-javascript">      </span><span class="token script token language-javascript token" style="color:#D373E3">var</span><span class="token script token language-javascript"> bars </span><span class="token script token language-javascript token" style="color:#19B9C4">=</span><span class="token script token language-javascript"> svg</span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token method" style="color:#40B1F5">selectAll</span><span class="token script token language-javascript token" style="color:#A9B2C0">(</span><span class="token script token language-javascript token" style="color:#8CC570">&quot;rect&quot;</span><span class="token script token language-javascript token" style="color:#A9B2C0">)</span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token method" style="color:#40B1F5">data</span><span class="token script token language-javascript token" style="color:#A9B2C0">(</span><span class="token script token language-javascript">nums</span><span class="token script token language-javascript token" style="color:#A9B2C0">)</span><span class="token script token language-javascript token" style="color:#A9B2C0">;</span><span class="token script token language-javascript">
</span></span><span class="token script token language-javascript">
</span><span><span class="token script token language-javascript">      bars</span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token method" style="color:#40B1F5">enter</span><span class="token script token language-javascript token" style="color:#A9B2C0">(</span><span class="token script token language-javascript token" style="color:#A9B2C0">)</span><span class="token script token language-javascript token" style="color:#A9B2C0">.</span><span class="token script token language-javascript token method" style="color:#40B1F5">append</span><span class="token script token language-javascript token" style="color:#A9B2C0">(</span><span class="token script token language-javascript token" style="color:#8CC570">&quot;rect&quot;</span><span class="token script token language-javascript token" style="color:#A9B2C0">)</span><span class="token script token language-javascript token" style="color:#A9B2C0">;</span><span class="token script token language-javascript">
</span></span><span><span class="token script token language-javascript">    </span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">script</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">body</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">html</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#5A6371;font-style:italic">&lt;!-- You get this! --&gt;</span><span>
</span></span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">svg</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span>  </span><span class="token token token" style="color:#A9B2C0">&lt;</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">rect</span><span class="token token" style="color:#A9B2C0">&gt;</span><span>
</span></span><span><span></span><span class="token token token" style="color:#A9B2C0">&lt;/</span><span class="token token" style="color:#F16372">svg</span><span class="token token" style="color:#A9B2C0">&gt;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Congratulations - you&#x27;ve just created your first data-driven document!</p><h2 id="data-is-stored-in-the-dom" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Data is stored in the DOM</h2><p class="mt-4 lg:mt-6">You may be thinking that the data used in the join is stored in D3 somewhere. In fact, when the elements are inserted into the DOM, D3 stores the data as properties on the DOM nodes themselves. Try running the following command in the console:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token dom" style="color:#F16372">document</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">querySelector</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token" style="color:#40B1F5">__data__</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#5A6371;font-style:italic">//80</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">As you can see, the data is available without the use of D3. It has become part of the document.</p><p class="mt-4 lg:mt-6">This leads us to another fact about selections: <strong>selections are transient.</strong> If you ever need to reselect elements that have been inserted into the DOM, you simply reselect them:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>d3</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">selectAll</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">Inspect those in the console, and you&#x27;ll see the same rectangles bound to the same data. D3 provides a convenient method for returning the array of data bound to a selection: <code class="px-1 py-px text-sm bg-gray-100">d3.selectAll(&#x27;rect&#x27;).data()</code>.</p><p class="mt-4 lg:mt-6">And with that, we&#x27;re over the hump! Selections are the main hurdle in D3, and as you practice with them, the rest of the library will make much more sense.</p><h2 id="using-data-driven-transformations-to-finish-the-chart" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Using data-driven transformations to finish the chart</h2><p class="mt-4 lg:mt-6">We now have data-bound <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> elements in the DOM. This is exciting! The elements know about their data, and it&#x27;s easy for us to apply more data-driven transformations to finish our chart.</p><p class="mt-4 lg:mt-6">So, what&#x27;s the next step? Well, you may notice that our six rectangles aren&#x27;t actually rendering anything out to the screen. This is because they don&#x27;t have a width or height.</p><p class="mt-4 lg:mt-6">Let&#x27;s give them some dummy properties, and see what we&#x27;re working with:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#D373E3">var</span><span> bars </span><span class="token" style="color:#19B9C4">=</span><span> d3</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">selectAll</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;rect&quot;</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;width&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">20</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;height&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#DB975C">20</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><div id="chart2"></div><p class="mt-4 lg:mt-6">Hmm, that doesn&#x27;t look like six bars. Actually, if you open your inspector, you&#x27;ll see that all six are there. The problem is, they&#x27;re all stacked on top of each other.</p><p class="mt-4 lg:mt-6">Let&#x27;s spread them out a bit. <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> elements have <code class="px-1 py-px text-sm bg-gray-100">x</code> and <code class="px-1 py-px text-sm bg-gray-100">y</code> properties that control horizontal and vertical position, respectively. We&#x27;ll offset the bars horizontally by changing the <code class="px-1 py-px text-sm bg-gray-100">x</code> property. Now, we can&#x27;t just set them all to something like 10; this will move them all together. We need to move the first one a bit, the second a bit more, and so on.</p><p class="mt-4 lg:mt-6">Sounds like we need another data-driven transformation! Above, we created bar elements in a data-driven way by calling <code class="px-1 py-px text-sm bg-gray-100">append</code> on a bound selection. Once we&#x27;re working with a bound selection, we can implement additional data-driven transformations using the following syntax (which you&#x27;ll recognize from our very first example):</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>selection</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&#x27;attrName&#x27;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#D373E3">function</span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">d</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> i</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span> </span><span class="token" style="color:#D373E3">return</span><span> </span><span class="token" style="color:#A9B2C0">[</span><span>expression using d</span><span class="token" style="color:#19B9C4">/</span><span>i</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span>selection</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">style</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&#x27;cssProp&#x27;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#D373E3">function</span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">d</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> i</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span> </span><span class="token" style="color:#D373E3">return</span><span> </span><span class="token" style="color:#A9B2C0">[</span><span>expression using d</span><span class="token" style="color:#19B9C4">/</span><span>i</span><span class="token" style="color:#A9B2C0">]</span><span class="token" style="color:#A9B2C0">;</span><span> </span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><p class="mt-4 lg:mt-6">The second parameter of either an attribute (e.g. <code class="px-1 py-px text-sm bg-gray-100">width</code> on a rectangle) or a css property (e.g. <code class="px-1 py-px text-sm bg-gray-100">opacity</code>) can be a function, instead of just a static value. And that function accepts two parameters corresponding to the current element in the selection: <code class="px-1 py-px text-sm bg-gray-100">d</code> represents the current data point, and <code class="px-1 py-px text-sm bg-gray-100">i</code> the current index.</p><p class="mt-4 lg:mt-6">For this transformation, we&#x27;ll use each bar&#x27;s index.</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>bars</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;x&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">d</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> i</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">return</span><span> </span><span class="token" style="color:#DB975C">30</span><span> </span><span class="token" style="color:#19B9C4">*</span><span> i</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><div id="chart3"></div><p class="mt-4 lg:mt-6">Finally, making some progress! Next, we need to get these boxes looking more like bars. To change the height of a <code class="px-1 py-px text-sm bg-gray-100">&lt;rect&gt;</code> element, set the <code class="px-1 py-px text-sm bg-gray-100">height</code> property. In this case, we want the height of each bar to equal the number in our original data array, so...</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#5A6371;font-style:italic">// remember, var nums = [80, 53, 125, 200, 28, 97]</span><span>
</span></span><span>
</span><span><span>bars</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;height&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">d</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> i</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">return</span><span> d</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><div id="chart4"></div><p class="mt-4 lg:mt-6">Success! Well, sort of. Our bars seems to have flipped themselves upside-down. What gives?</p><p class="mt-4 lg:mt-6">It turns out that the origin of the <a class="text-blue-500 underline" href="http://www.w3.org/TR/SVG/coords.html#InitialCoordinateSystem">SVG coordinate plane</a> is the top-left corner:</p><img class="mt-4 lg:mt-6" src="/_next/static/media/svg-coord.cfe9c78b7629e83607731b2d1797a34d.png"/><p class="mt-4 lg:mt-6">So, the &quot;base&quot; of each bar actually runs along the top of the <code class="px-1 py-px text-sm bg-gray-100">&lt;svg&gt;</code> element, and the <code class="px-1 py-px text-sm bg-gray-100">height</code> property extends a bar downward. To make our bars stand rightside-up, we can use the <code class="px-1 py-px text-sm bg-gray-100">y</code> offset to pull each bar down to the bottom of the <code class="px-1 py-px text-sm bg-gray-100">&lt;svg&gt;</code> element.</p><p class="mt-4 lg:mt-6">We want to offset each bar by the total height of the chart, less that bar&#x27;s height. Since we set the height of our <code class="px-1 py-px text-sm bg-gray-100">&lt;svg&gt;</code> to 200, here&#x27;s what we need to do:</p><div><div class="my-8 -mx-6 overflow-hidden sm:rounded-lg md:mx-auto"><pre class="language-js subpixel-antialiased leading-relaxed text-sm- md:text-sm px-6 py-4 overflow-auto scrolling-touch" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#282c34"><code class="language-js" style="color:#A9B2C0;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>bars</span><span class="token" style="color:#A9B2C0">.</span><span class="token method" style="color:#40B1F5">attr</span><span class="token" style="color:#A9B2C0">(</span><span class="token" style="color:#8CC570">&quot;y&quot;</span><span class="token" style="color:#A9B2C0">,</span><span> </span><span class="token" style="color:#D373E3">function</span><span> </span><span class="token" style="color:#A9B2C0">(</span><span class="token parameter">d</span><span class="token parameter token" style="color:#A9B2C0">,</span><span class="token parameter"> i</span><span class="token" style="color:#A9B2C0">)</span><span> </span><span class="token" style="color:#A9B2C0">{</span><span>
</span></span><span><span>  </span><span class="token" style="color:#D373E3">return</span><span> </span><span class="token" style="color:#DB975C">200</span><span> </span><span class="token" style="color:#19B9C4">-</span><span> d</span><span class="token" style="color:#A9B2C0">;</span><span>
</span></span><span><span></span><span class="token" style="color:#A9B2C0">}</span><span class="token" style="color:#A9B2C0">)</span><span class="token" style="color:#A9B2C0">;</span></span></code></pre></div></div><div id="chart5"></div><p class="mt-4 lg:mt-6">We did it! A simple data-driven bar chart, ripe for CSS styling and additional Javascript manipulation.</p><h2 id="some-concluding-thoughts-on-d3-and-big-data" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Some concluding thoughts on D3 and big data</h2><p class="mt-4 lg:mt-6">There are, of course, many - <em>many</em> - more things to learn, both inside and outside the D3 library itself. Scales, axes, transitions, events, brushes...it can seem a little overwhelming. But it&#x27;s also a testament to how much control D3 gives you over your visualizations. After learning this, one may wonder if such a low-level tool can really be useful for analyzing massive amounts of data. Aren&#x27;t there libraries better equipped for this sort of thing?</p><p class="mt-4 lg:mt-6">D3 certainly doesn&#x27;t provide an end-all solution to the problem of big data analysis; but it plays an important role. First off, here&#x27;s a list of some data-intensive projects and companies using D3:</p><ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><a class="text-blue-500 underline" href="http://square.github.io/cubism/">Cubism</a> and <a class="text-blue-500 underline" href="http://square.github.io/crossfilter/">Crossfilter</a>: display and filter 250,000 data points in real-time</li><li class="mt-2"><a class="text-blue-500 underline" href="http://techblog.netflix.com/2014/01/improving-netflixs-operational.html">Netflix</a> analytics</li><li class="mt-2"><a class="text-blue-500 underline" href="http://corner.squareup.com/2012/04/building-analytics.html">Square</a> analytics</li><li class="mt-2"><a class="text-blue-500 underline" href="https://addepar.com/">Addepar</a> financial tools</li><li class="mt-2"><a class="text-blue-500 underline" href="http://www.localytics.com/">Localytics</a></li><li class="mt-2">Open-source tools binding D3 to R, Python</li></ul><p class="mt-4 lg:mt-6">There are many more beyond this list, but you get the idea: D3 has been making a splash among companies that deal with large amounts of data.</p><p class="mt-4 lg:mt-6">More importantly, trends in modern analytics are bringing interactive visualizations to the fore. Not too long ago, computer hardware was expensive and data analysis time-consuming. Running a simple model could take hours or even days, so static analysis - writing an algorithm, feeding it some data, exploring the results, and repeating - was really the only option.</p><p class="mt-4 lg:mt-6">But modern hardware has drastically impacted this process. Static reports have been replaced by dynamic, interactive real-time visualizations. And more companies are discovering that interactive tools are <em>the way</em> to gain actionable insights from their data.</p><p class="mt-4 lg:mt-6">This is where D3 comes in. It gives you a toolkit for building complex visualizations rich with interactivity. Traditional server-side technologies are still useful for cleaning, aggregating, reducing and filtering raw data; but when it comes to viewing and interpreting the results, you need customized, dynamic visualizations. D3 can help you build those.</p><p class="mt-4 lg:mt-6">Human knowledge and intuition has always played a role in data analysis. It tells us where to look, what to look for, and what to ignore. D3 lets us build tools to enhance these capabilities, giving us more control and better understanding of our data.</p><h2 id="learn-more" class="pt-20 mt-8 text-lg font-semibold leading-tight text-gray-900 border-t border-gray-200 md:text-2xl">Learn more</h2><p class="mt-4 lg:mt-6">This tutorial barely scratched the surface of what D3 has to offer, so here are some more resources to help you on your journey. If you don&#x27;t understand things the first time around, don&#x27;t get discouraged; D3 is one of those things that starts to make sense after hearing the same ideas presented in two or three different ways.</p><p class="mt-4 lg:mt-6">Most importantly, practice!</p><ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><a class="text-blue-500 underline" href="https://github.com/mbostock/d3/wiki/Gallery">Examples</a>. Inspiring and instructive. The <a class="text-blue-500 underline" href="https://github.com/mbostock/d3/wiki/Gallery#wiki-basic-charts">basic charts</a> are a good place to start.</li><li class="mt-2"><a class="text-blue-500 underline" href="https://github.com/mbostock/d3/wiki/Tutorials">Tutorials</a>, especially<ul class="pl-6 mt-4 list-disc lg:mt-6"><li class="mt-2"><a class="text-blue-500 underline" href="http://bost.ocks.org/mike/bar/">Let&#x27;s make a bar chart</a></li><li class="mt-2"><a class="text-blue-500 underline" href="http://bl.ocks.org/mbostock/3808218">The General Update Pattern</a></li></ul></li><li class="mt-2">Scott Murray&#x27;s <a class="text-blue-500 underline" href="http://alignedleft.com/tutorials/d3/">online tutorials</a> and <a class="text-blue-500 underline" href="http://shop.oreilly.com/product/0636920026938.do?cmp=af-strata-books-videos-product_cj_9781449339739_%25zp">book</a></li><li class="mt-2"><a class="text-blue-500 underline" href="https://groups.google.com/forum/#!forum/d3-js">Google forum</a></li></ul></article><p class="pt-8 text-sm font-medium text-right text-gray-500 md:mt-1">February 24, 2014</p><hr class="mt-10"/><div class="mt-10"><div><a class="block w-16 h-16 mx-auto overflow-hidden rounded-full" href="/"><div style="max-width:100%;width:985px"><div style="position:relative;padding-bottom:100%"><img data-src="/_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=1024&amp;q=75" data-srcset="/_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=320&amp;q=75 320w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=420&amp;q=75 420w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=768&amp;q=75 768w, /_next/image?url=%2Fimages%2Fprofile.jpeg&amp;w=1024&amp;q=75 1024w" class="__lazy" style="visibility:hidden;height:100%;left:0;position:absolute;top:0;width:100%"/></div></div></a></div><div class="mt-2 leading-none text-center"><p class="pt-2 text-xs font-semibold tracking-wider text-gray-600 uppercase">Written by</p><p class="pt-2 text-xl font-semibold"><a href="/">Sam Selikoff</a></p></div></div><div class="pb-24 mt-8 text-center"><a class="font-medium text-blue-500" href="/blog">â† View all posts</a></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/intro-to-d3","query":{},"buildId":"EpWVbJ8Vay8S48esD5IOE","assetPrefix":"/new-profile","nextExport":true,"autoExport":true,"isFallback":false,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"apple-touch-icon","sizes":"57x57","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"60x60","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"72x72","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"76x76","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"114x114","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"120x120","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"144x144","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"152x152","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"apple-touch-icon","sizes":"180x180","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"192x192","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"32x32","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"96x96","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"icon","type":"image/png","sizes":"16x16","href":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["link",{"rel":"manifest","href":"/manifest.json"}],["meta",{"name":"msapplication-TileColor","content":"#ffffff"}],["meta",{"name":"msapplication-TileImage","content":"https://raw.githubusercontent.com/franka107/new-profile/master/public/isotype.png"}],["meta",{"name":"theme-color","content":"#ffffff"}],["title",{"children":"An Introduction to D3"}]]}</script><script nomodule="" src="/new-profile/_next/static/chunks/polyfills-f9ac226678fc858257de.js"></script><script src="/new-profile/_next/static/chunks/main-5ab6ea82c9087f336e12.js" async=""></script><script src="/new-profile/_next/static/chunks/webpack-38f4ef47162466e52626.js" async=""></script><script src="/new-profile/_next/static/chunks/framework.7008427c9ed7ea1ea070.js" async=""></script><script src="/new-profile/_next/static/chunks/1ca0266d.bc7564fa166f0d34b14f.js" async=""></script><script src="/new-profile/_next/static/chunks/commons.c903b9c5c3d275f65bfc.js" async=""></script><script src="/new-profile/_next/static/chunks/74dccfed65656dfb6adb258ae839e136f67e0276.47b8922ced02d1ddaa2f.js" async=""></script><script src="/new-profile/_next/static/chunks/2412aec2c30a40454afb28aa7ad51596c664a3e6.1e80e1ab8448746fa0db.js" async=""></script><script src="/new-profile/_next/static/chunks/pages/_app-3f00c45ba3d6396804fc.js" async=""></script><script src="/new-profile/_next/static/chunks/57c9d6e4b97e6bcf244aee8ce3648d5d9adaacb1.bfcec4d669b9affd02e0.js" async=""></script><script src="/new-profile/_next/static/chunks/798fd9b41a459e61ee4594ce38d25c96f259064c.8c8bea5984a65dd9a41b.js" async=""></script><script src="/new-profile/_next/static/chunks/pages/blog/intro-to-d3-1e496ff5e570fa70fba1.js" async=""></script><script src="/new-profile/_next/static/EpWVbJ8Vay8S48esD5IOE/_buildManifest.js" async=""></script><script src="/new-profile/_next/static/EpWVbJ8Vay8S48esD5IOE/_ssgManifest.js" async=""></script></body></html>